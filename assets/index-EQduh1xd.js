import{d as G,r as i,j as V,k as L,g as A,b as u,l as t,u as a,t as r,c as g,a as h,n as O,o as _,i as S,F as J,m as K}from"./index-aGPECSjT.js";import{E as P}from"./index-B6CT2s5_.js";import{C as Q}from"./index-Bb18YZGZ.js";import{C as X}from"./index-DQcSf335.js";import{D as Y,a as Z}from"./index-D5eO85gH.js";import{N as tt}from"./index-C6GoR6dS.js";import{r as U}from"./request-DElt7uXM.js";import{I as et}from"./index-A3DcMHlH.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-id-ku59B7wn.js";import"./use-scope-id-BQkzMLrT.js";import"./use-route-Bepk0WUj.js";import"./use-expose-Bn8jNSAx.js";import"./function-call-RbU9eDT5.js";import"./on-popup-reopen-CSvVhWC_.js";import"./interceptor-DOYkiFfT.js";import"./index-9TlBFr2p.js";const z="https://api.vvhan.com",at=()=>U({url:z+"/api/weather",method:"get"}),nt=w=>U({url:z+"/api/hotlist/"+w,method:"get"}),st={class:"homeBox"},lt={class:"weather_container"},it={class:"weather_Item"},rt={class:"text"},ct={class:"weather_Item"},ut={class:"text"},_t={class:"weather_Item"},mt={class:"text"},dt={class:"hot_container"},pt={class:"top"},ht={class:"top_title"},vt={class:"title"},xt={class:"top_right"},ft={class:"cellItem_title"},gt=G({__name:"index",setup(w){let y=i("O.o？"),v=i(),C=i();const E=async()=>{try{let e=await at();e.success===!0&&(v.value=e.data,C.value=e.air,y.value=`当前位于：${e.city}`)}catch(e){console.log("err:getWeather",e)}};V(()=>{E()});const c=i(0),m=[{text:"微博热搜",value:0,name:"wbHot"},{text:"抖音热点",value:1,name:"douyinHot"},{text:"百度热搜",value:2,name:"baiduRD"},{text:"知乎热点",value:3,name:"zhihuHot"},{text:"今日头条",value:4,name:"toutiao"},{text:"知乎日报",value:5,name:"zhihuDay"},{text:"B站日榜",value:6,name:"bili"}],M=e=>{b(m[e].name)};let x=i(!1);const I=()=>{x.value=!x.value};let k=i();const b=async e=>{var o;try{let s=await nt(e);k.value=(o=s.data)==null?void 0:o.map(l=>({index:l.index,hot:l.hot,mobileUrl:l.mobilUrl,url:l.url,title:l.title}))}catch(s){console.log("err:getHot",s)}};V(()=>{b(m[c.value].name)});let d=i(0),D=L(()=>{var s;let e=d.value*10,o=e+10;return((s=k.value)==null?void 0:s.slice(e,o))||[]}),f=i(!1),p=null;const R=()=>{f.value=!0,d.value++,d.value===3&&(d.value=0),p&&clearTimeout(p),p=setTimeout(()=>{f.value=!1,p=null},300)},W=e=>{window.open(e.url,"_blank")};return(e,o)=>{var B,H,N;const s=tt,l=et,$=Z,q=Y,F=X,T=Q,j=P;return _(),A("div",st,[u(s,{class:"home_noticeBar","left-icon":"volume-o",text:a(y)},null,8,["text"]),t("div",lt,[o[4]||(o[4]=t("div",{class:"weather_img"},[t("svg",{"aria-hidden":"true"},[t("use",{href:"#icon-weather-cloudy"})])],-1)),t("div",it,[o[1]||(o[1]=t("span",{class:"title"},"空气质量",-1)),t("span",rt,r(((B=a(C))==null?void 0:B.aqi_name)||"-"),1)]),t("div",ct,[o[2]||(o[2]=t("span",{class:"title"},"最低气温",-1)),t("span",ut,r(((H=a(v))==null?void 0:H.low)||"-"),1)]),t("div",_t,[o[3]||(o[3]=t("span",{class:"title"},"最高气温",-1)),t("span",mt,r(((N=a(v))==null?void 0:N.high)||"-"),1)])]),t("div",dt,[t("div",pt,[u(q,null,{default:h(()=>[u($,{modelValue:a(c),"onUpdate:modelValue":o[0]||(o[0]=n=>S(c)?c.value=n:null),options:m,onOpen:I,onClose:I,onChange:M},{title:h(()=>[t("div",ht,[t("div",vt,r(m[a(c)].text),1),u(l,{name:a(x)?"arrow-down":"arrow"},null,8,["name"])])]),_:1},8,["modelValue"])]),_:1}),t("div",xt,[u(l,{name:"replay",class:O(["right_icon",{right_icon_rotate:a(f)}])},null,8,["class"]),t("span",{onClick:R},"换一批")])]),a(D).length>0?(_(),g(T,{key:0},{default:h(()=>[(_(!0),A(J,null,K(a(D),n=>(_(),g(F,{key:n.index,title:n.title,"title-class":"cellItem_titleBox",onClick:wt=>W(n)},{title:h(()=>[t("span",{class:O(["cellItem_index",n.index<=3?`hot_class_${n.index}`:""])},r(n.index),3),t("span",ft,r(n.title),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})):(_(),g(j,{key:1,description:"暂无数据"}))])])}}}),Wt=ot(gt,[["__scopeId","data-v-0390adb6"]]);export{Wt as default};
