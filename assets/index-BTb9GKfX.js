import{I as be}from"./_plugin-vue_export-helper-BQC3p5UF.js";import{j as U,d as W,r as N,a4 as we,t as L,b as B,k as K,x as j,ac as Ce,n as X,ai as Se,a9 as F,Q as Be,w as Ee,V as re,X as xe,l as Te,a0 as ee,a3 as R,y as G,D as _e,C as ke,m as H,ad as Pe,I as Ae,ak as Oe,z as Le,al as te,am as De}from"./index-M4brf8cj.js";import{B as Q,a as Ie,u as Re,m as J}from"./vantTool-DsKiJpMc.js";import{a as Ne,p as je,P as ze}from"./index-QNMI0kE-.js";import{u as Me}from"./use-placeholder-ChelFdm0.js";import{u as $e}from"./use-expose-DPr-92Zh.js";import{a as Fe,u as He,b as Ue,c as We}from"./use-route-BrlykrmF.js";import{c as Ke}from"./interceptor-F55hFJrP.js";const[ae,ne]=U("action-bar"),ie=Symbol(ae),Ye={placeholder:Boolean,safeAreaInsetBottom:L};var Ve=W({name:ae,props:Ye,setup(t,{slots:S}){const g=N(),p=Me(g,ne),{linkChildren:m}=we(ie);m();const i=()=>{var a;return B("div",{ref:g,class:[ne(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(a=S.default)==null?void 0:a.call(S)])};return()=>t.placeholder?p(i):i()}});const Xe=K(Ve),[Ge,Qe]=U("action-bar-button"),Je=j({},Fe,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ze=W({name:Ge,props:Je,setup(t,{slots:S}){const g=He(),{parent:p,index:m}=Ce(ie),i=X(()=>{if(p){const e=p.children[m.value-1];return!(e&&"isButton"in e)}}),a=X(()=>{if(p){const e=p.children[m.value+1];return!(e&&"isButton"in e)}});return $e({isButton:!0}),()=>{const{type:e,icon:l,text:u,color:y,loading:w,disabled:b}=t;return B(Q,{class:Qe([e,{last:a.value,first:i.value}]),size:"large",type:e,icon:l,color:y,loading:w,disabled:b,onClick:g},{default:()=>[S.default?S.default():u]})}}});const oe=K(Ze),[qe,O]=U("image"),et={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:R,height:R,radius:R,lazyLoad:Boolean,iconSize:R,showError:L,errorIcon:G("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:G("photo"),crossorigin:String,referrerpolicy:String};var tt=W({name:qe,props:et,emits:["load","error"],setup(t,{emit:S,slots:g}){const p=N(!1),m=N(!0),i=N(),{$Lazyload:a}=Se().proxy,e=X(()=>{const n={width:F(t.width),height:F(t.height)};return Be(t.radius)&&(n.overflow="hidden",n.borderRadius=F(t.radius)),n});Ee(()=>t.src,()=>{p.value=!1,m.value=!0});const l=n=>{m.value&&(m.value=!1,S("load",n))},u=()=>{const n=new Event("load");Object.defineProperty(n,"target",{value:i.value,enumerable:!0}),l(n)},y=n=>{p.value=!0,m.value=!1,S("error",n)},w=(n,s,E)=>E?E():B(be,{name:n,size:t.iconSize,class:s,classPrefix:t.iconPrefix},null),b=()=>{if(m.value&&t.showLoading)return B("div",{class:O("loading")},[w(t.loadingIcon,O("loading-icon"),g.loading)]);if(p.value&&t.showError)return B("div",{class:O("error")},[w(t.errorIcon,O("error-icon"),g.error)])},x=()=>{if(p.value||!t.src)return;const n={alt:t.alt,class:O("img"),style:{objectFit:t.fit,objectPosition:t.position},crossorigin:t.crossorigin,referrerpolicy:t.referrerpolicy};return t.lazyLoad?_e(B("img",H({ref:i},n),null),[[ke("lazy"),t.src]]):B("img",H({ref:i,src:t.src,onLoad:l,onError:y},n),null)},v=({el:n})=>{const s=()=>{n===i.value&&m.value&&u()};i.value?s():ee(s)},C=({el:n})=>{n===i.value&&!p.value&&y()};return a&&re&&(a.$on("loaded",v),a.$on("error",C),xe(()=>{a.$off("loaded",v),a.$off("error",C)})),Te(()=>{ee(()=>{var n;(n=i.value)!=null&&n.complete&&!t.lazyLoad&&u()})}),()=>{var n;return B("div",{class:O({round:t.round,block:t.block}),style:e.value},[x(),b(),(n=g.default)==null?void 0:n.call(g)])}}});const Et=K(tt),[nt,k,$]=U("dialog"),ot=j({},Ne,{title:String,theme:String,width:R,message:[String,Function],callback:Function,allowHtml:Boolean,className:Pe,transition:G("van-dialog-bounce"),messageAlign:String,closeOnPopstate:L,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:L,closeOnClickOverlay:Boolean,keyboardEnabled:L}),rt=[...je,"transition","closeOnPopstate"];var ce=W({name:nt,props:ot,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:S,slots:g}){const p=N(),m=Ae({confirm:!1,cancel:!1}),i=s=>S("update:show",s),a=s=>{var E;i(!1),(E=t.callback)==null||E.call(t,s)},e=s=>()=>{t.show&&(S(s),t.beforeClose?(m[s]=!0,Ke(t.beforeClose,{args:[s],done(){a(s),m[s]=!1},canceled(){m[s]=!1}})):a(s))},l=e("cancel"),u=e("confirm"),y=Oe(s=>{var E,P;if(!t.keyboardEnabled||s.target!==((P=(E=p.value)==null?void 0:E.popupRef)==null?void 0:P.value))return;({Enter:t.showConfirmButton?u:te,Escape:t.showCancelButton?l:te})[s.key](),S("keydown",s)},["enter","esc"]),w=()=>{const s=g.title?g.title():t.title;if(s)return B("div",{class:k("header",{isolated:!t.message&&!g.default})},[s])},b=s=>{const{message:E,allowHtml:P,messageAlign:T}=t,A=k("message",{"has-title":s,[T]:T}),D=De(E)?E():E;return P&&typeof D=="string"?B("div",{class:A,innerHTML:D},null):B("div",{class:A},[D])},x=()=>{if(g.default)return B("div",{class:k("content")},[g.default()]);const{title:s,message:E,allowHtml:P}=t;if(E){const T=!!(s||g.title);return B("div",{key:P?1:0,class:k("content",{isolated:!T})},[b(T)])}},v=()=>B("div",{class:[We,k("footer")]},[t.showCancelButton&&B(Q,{size:"large",text:t.cancelButtonText||$("cancel"),class:k("cancel"),style:{color:t.cancelButtonColor},loading:m.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&B(Q,{size:"large",text:t.confirmButtonText||$("confirm"),class:[k("confirm"),{[Ue]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:m.confirm,disabled:t.confirmButtonDisabled,onClick:u},null)]),C=()=>B(Xe,{class:k("footer")},{default:()=>[t.showCancelButton&&B(oe,{type:"warning",text:t.cancelButtonText||$("cancel"),class:k("cancel"),color:t.cancelButtonColor,loading:m.cancel,disabled:t.cancelButtonDisabled,onClick:l},null),t.showConfirmButton&&B(oe,{type:"danger",text:t.confirmButtonText||$("confirm"),class:k("confirm"),color:t.confirmButtonColor,loading:m.confirm,disabled:t.confirmButtonDisabled,onClick:u},null)]}),n=()=>g.footer?g.footer():t.theme==="round-button"?C():v();return()=>{const{width:s,title:E,theme:P,message:T,className:A}=t;return B(ze,H({ref:p,role:"dialog",class:[k([P]),A],style:{width:F(s)},tabindex:0,"aria-labelledby":E||T,onKeydown:y,"onUpdate:show":i},Le(t,rt)),{default:()=>[w(),x(),n()]})}}});let Z;const at={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let it=j({},at);function ct(){({instance:Z}=Ie({setup(){const{state:S,toggle:g}=Re();return()=>B(ce,H(S,{"onUpdate:show":g}),null)}}))}function lt(t){return re?new Promise((S,g)=>{Z||ct(),Z.open(j({},it,t,{callback:p=>{(p==="confirm"?S:g)(p)}}))}):Promise.resolve(void 0)}const ut=t=>lt(j({showCancelButton:!0},t)),xt=K(ce);var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var le={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(t,S){(function(p,m){t.exports=m()})(st,function(){return function(){var g={686:function(i,a,e){e.d(a,{default:function(){return ve}});var l=e(279),u=e.n(l),y=e(370),w=e.n(y),b=e(817),x=e.n(b);function v(d){try{return document.execCommand(d)}catch{return!1}}var C=function(r){var o=x()(r);return v("cut"),o},n=C;function s(d){var r=document.documentElement.getAttribute("dir")==="rtl",o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(c,"px"),o.setAttribute("readonly",""),o.value=d,o}var E=function(r,o){var c=s(r);o.container.appendChild(c);var f=x()(c);return v("copy"),c.remove(),f},P=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},c="";return typeof r=="string"?c=E(r,o):r instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(r==null?void 0:r.type)?c=E(r.value,o):(c=x()(r),v("copy")),c},T=P;function A(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(o){return typeof o}:A=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},A(d)}var D=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=r.action,c=o===void 0?"copy":o,f=r.container,h=r.target,_=r.text;if(c!=="copy"&&c!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(h!==void 0)if(h&&A(h)==="object"&&h.nodeType===1){if(c==="copy"&&h.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(c==="cut"&&(h.hasAttribute("readonly")||h.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(_)return T(_,{container:f});if(h)return c==="cut"?n(h):T(h,{container:f})},ue=D;function I(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(o){return typeof o}:I=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},I(d)}function se(d,r){if(!(d instanceof r))throw new TypeError("Cannot call a class as a function")}function q(d,r){for(var o=0;o<r.length;o++){var c=r[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(d,c.key,c)}}function fe(d,r,o){return q(d.prototype,r),q(d,o),d}function de(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(r&&r.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),r&&Y(d,r)}function Y(d,r){return Y=Object.setPrototypeOf||function(c,f){return c.__proto__=f,c},Y(d,r)}function ye(d){var r=he();return function(){var c=z(d),f;if(r){var h=z(this).constructor;f=Reflect.construct(c,arguments,h)}else f=c.apply(this,arguments);return me(this,f)}}function me(d,r){return r&&(I(r)==="object"||typeof r=="function")?r:ge(d)}function ge(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function z(d){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},z(d)}function V(d,r){var o="data-clipboard-".concat(d);if(r.hasAttribute(o))return r.getAttribute(o)}var pe=function(d){de(o,d);var r=ye(o);function o(c,f){var h;return se(this,o),h=r.call(this),h.resolveOptions(f),h.listenClick(c),h}return fe(o,[{key:"resolveOptions",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof f.action=="function"?f.action:this.defaultAction,this.target=typeof f.target=="function"?f.target:this.defaultTarget,this.text=typeof f.text=="function"?f.text:this.defaultText,this.container=I(f.container)==="object"?f.container:document.body}},{key:"listenClick",value:function(f){var h=this;this.listener=w()(f,"click",function(_){return h.onClick(_)})}},{key:"onClick",value:function(f){var h=f.delegateTarget||f.currentTarget,_=this.action(h)||"copy",M=ue({action:_,container:this.container,target:this.target(h),text:this.text(h)});this.emit(M?"success":"error",{action:_,text:M,trigger:h,clearSelection:function(){h&&h.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(f){return V("action",f)}},{key:"defaultTarget",value:function(f){var h=V("target",f);if(h)return document.querySelector(h)}},{key:"defaultText",value:function(f){return V("text",f)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(f,h)}},{key:"cut",value:function(f){return n(f)}},{key:"isSupported",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],h=typeof f=="string"?[f]:f,_=!!document.queryCommandSupported;return h.forEach(function(M){_=_&&!!document.queryCommandSupported(M)}),_}}]),o}(u()),ve=pe},828:function(i){var a=9;if(typeof Element<"u"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function l(u,y){for(;u&&u.nodeType!==a;){if(typeof u.matches=="function"&&u.matches(y))return u;u=u.parentNode}}i.exports=l},438:function(i,a,e){var l=e(828);function u(b,x,v,C,n){var s=w.apply(this,arguments);return b.addEventListener(v,s,n),{destroy:function(){b.removeEventListener(v,s,n)}}}function y(b,x,v,C,n){return typeof b.addEventListener=="function"?u.apply(null,arguments):typeof v=="function"?u.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(s){return u(s,x,v,C,n)}))}function w(b,x,v,C){return function(n){n.delegateTarget=l(n.target,x),n.delegateTarget&&C.call(b,n)}}i.exports=y},879:function(i,a){a.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},a.nodeList=function(e){var l=Object.prototype.toString.call(e);return e!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in e&&(e.length===0||a.node(e[0]))},a.string=function(e){return typeof e=="string"||e instanceof String},a.fn=function(e){var l=Object.prototype.toString.call(e);return l==="[object Function]"}},370:function(i,a,e){var l=e(879),u=e(438);function y(v,C,n){if(!v&&!C&&!n)throw new Error("Missing required arguments");if(!l.string(C))throw new TypeError("Second argument must be a String");if(!l.fn(n))throw new TypeError("Third argument must be a Function");if(l.node(v))return w(v,C,n);if(l.nodeList(v))return b(v,C,n);if(l.string(v))return x(v,C,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function w(v,C,n){return v.addEventListener(C,n),{destroy:function(){v.removeEventListener(C,n)}}}function b(v,C,n){return Array.prototype.forEach.call(v,function(s){s.addEventListener(C,n)}),{destroy:function(){Array.prototype.forEach.call(v,function(s){s.removeEventListener(C,n)})}}}function x(v,C,n){return u(document.body,v,C,n)}i.exports=y},817:function(i){function a(e){var l;if(e.nodeName==="SELECT")e.focus(),l=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var u=e.hasAttribute("readonly");u||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),u||e.removeAttribute("readonly"),l=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var y=window.getSelection(),w=document.createRange();w.selectNodeContents(e),y.removeAllRanges(),y.addRange(w),l=y.toString()}return l}i.exports=a},279:function(i){function a(){}a.prototype={on:function(e,l,u){var y=this.e||(this.e={});return(y[e]||(y[e]=[])).push({fn:l,ctx:u}),this},once:function(e,l,u){var y=this;function w(){y.off(e,w),l.apply(u,arguments)}return w._=l,this.on(e,w,u)},emit:function(e){var l=[].slice.call(arguments,1),u=((this.e||(this.e={}))[e]||[]).slice(),y=0,w=u.length;for(y;y<w;y++)u[y].fn.apply(u[y].ctx,l);return this},off:function(e,l){var u=this.e||(this.e={}),y=u[e],w=[];if(y&&l)for(var b=0,x=y.length;b<x;b++)y[b].fn!==l&&y[b].fn._!==l&&w.push(y[b]);return w.length?u[e]=w:delete u[e],this}},i.exports=a,i.exports.TinyEmitter=a}},p={};function m(i){if(p[i])return p[i].exports;var a=p[i]={exports:{}};return g[i](a,a.exports,m),a.exports}return function(){m.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return m.d(a,{a}),a}}(),function(){m.d=function(i,a){for(var e in a)m.o(a,e)&&!m.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:a[e]})}}(),function(){m.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)}}(),m(686)}().default})})(le);var dt=le.exports;const yt=ft(dt),mt=t=>({toClipboard(S,g){return new Promise((p,m)=>{const i=document.createElement("button"),a=new yt(i,{text:()=>S,action:()=>"copy",container:g!==void 0?g:document.body});a.on("success",e=>{a.destroy(),p(e)}),a.on("error",e=>{a.destroy(),m(e)}),document.body.appendChild(i),i.click(),document.body.removeChild(i)})}}),Tt=()=>({clickCopy:async S=>{const{toClipboard:g}=mt();try{await g(S),J.success("复制成功")}catch(p){J.fail("您的浏览器不支持复制：",p)}}}),_t=()=>({appWakeUp:(S,g="")=>{let p=null;const m=i=>{p=setTimeout(async()=>{try{await ut({title:"如果App没有打开，请点击下载前往安装",confirmButtonText:"下载"}),g===""||(window.location.href=g)}catch{J.fail("取消成功")}finally{p&&(clearTimeout(p),p=null)}},i)};window.location.href=S,m(2e3)}}),kt=()=>({isWeixin:navigator.userAgent.toLowerCase().includes("micromessenger")});export{xt as D,Et as I,Tt as a,_t as b,kt as u};
