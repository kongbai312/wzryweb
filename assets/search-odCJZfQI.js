import{Q as we,R as _e,S as Ae,T as Je,r as z,U as Qe,V as Ge,W as Pe,X as ze,K as We,d as L,I as M,y as se,Y as W,q as D,Z as Oe,J as ce,k,_ as Ee,p as He,$ as et,w as P,L as Se,b as g,a0 as te,N as J,a1 as F,a2 as Te,a3 as Le,A as U,x as H,a4 as De,a5 as tt,j as xe,a6 as Me,a7 as me,O as ee,z as at,a8 as ge,a9 as re,P as ye,aa as nt,ab as $e,ac as Ne,ad as it,D as lt,v as pe,s as Ce,ae as ot,af as rt,n as st,ag as ct,ah as ut,M as dt,ai as ft,F as vt}from"./index-BJC8_Fe1.js";import{u as Fe}from"./use-id-CMyFUr7f.js";import{u as ae}from"./use-expose-CnzF9TC0.js";import{r as ht,a as mt}from"./use-route-Dp5QcJUm.js";import{u as gt}from"./use-tab-status-AcVZHCSG.js";import{B as bt,a as wt}from"./index-BvG0UsAM.js";import{o as Ue}from"./on-popup-reopen-C3hNawWy.js";import{u as yt}from"./function-call-NUbWTRfG.js";import{c as St}from"./interceptor-BdB90t6g.js";import{r as Xe}from"./request-Cz80BztS.js";function Tt(e,n,s){let i,c=0;const t=e.scrollLeft,d=s===0?1:Math.round(s*1e3/16);let l=t;function f(){_e(i)}function u(){l+=(n-t)/d,e.scrollLeft=l,++c<d&&(i=we(u))}return u(),f}function xt(e,n,s,i){let c,t=Ae(e);const d=t<n,l=s===0?1:Math.round(s*1e3/16),f=(n-t)/l;function u(){_e(c)}function o(){t+=f,(d&&t>n||!d&&t<n)&&(t=n),Je(e,t),d&&t<n||!d&&t>n?c=we(o):i&&(c=we(i))}return o(),u}function kt(){const e=z([]),n=[];return Qe(()=>{e.value=[]}),[e,i=>(n[i]||(n[i]=c=>{e.value[i]=c}),n[i])]}function Ye(e,n){if(!Ge||!window.IntersectionObserver)return;const s=new IntersectionObserver(t=>{n(t[0].intersectionRatio>0)},{root:document.body}),i=()=>{e.value&&s.observe(e.value)},c=()=>{e.value&&s.unobserve(e.value)};Pe(c),ze(c),We(i)}const[$t,Ct]=D("sticky"),It={zIndex:W,position:se("top"),container:Object,offsetTop:M(0),offsetBottom:M(0)};var Rt=L({name:$t,props:It,emits:["scroll","change"],setup(e,{emit:n,slots:s}){const i=z(),c=Oe(i),t=ce({fixed:!1,width:0,height:0,transform:0}),d=z(!1),l=k(()=>Ee(e.position==="top"?e.offsetTop:e.offsetBottom)),f=k(()=>{if(d.value)return;const{fixed:v,height:$,width:b}=t;if(v)return{width:`${b}px`,height:`${$}px`}}),u=k(()=>{if(!t.fixed||d.value)return;const v=He(et(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${l.value}px`});return t.transform&&(v.transform=`translate3d(0, ${t.transform}px, 0)`),v}),o=v=>n("scroll",{scrollTop:v,isFixed:t.fixed}),S=()=>{if(!i.value||te(i))return;const{container:v,position:$}=e,b=J(i),C=Ae(window);if(t.width=b.width,t.height=b.height,$==="top")if(v){const m=J(v),O=m.bottom-l.value-t.height;t.fixed=l.value>b.top&&m.bottom>0,t.transform=O<0?O:0}else t.fixed=l.value>b.top;else{const{clientHeight:m}=document.documentElement;if(v){const O=J(v),y=m-O.top-l.value-t.height;t.fixed=m-l.value<b.bottom&&m>O.top,t.transform=y<0?-y:0}else t.fixed=m-l.value<b.bottom}o(C)};return P(()=>t.fixed,v=>n("change",v)),Se("scroll",S,{target:c,passive:!0}),Ye(i,S),P([Te,Le],()=>{!i.value||te(i)||!t.fixed||(d.value=!0,F(()=>{const v=J(i);t.width=v.width,t.height=v.height,d.value=!1}))}),()=>{var v;return g("div",{ref:i,style:f.value},[g("div",{class:Ct({fixed:t.fixed&&!d.value}),style:u.value},[(v=s.default)==null?void 0:v.call(s)])])}}});const Bt=U(Rt),[Ze,le]=D("swipe"),_t={loop:H,width:W,height:W,vertical:Boolean,autoplay:M(0),duration:M(500),touchable:H,lazyRender:Boolean,initialSwipe:M(0),indicatorColor:String,showIndicators:H,stopPropagation:H},Ve=Symbol(Ze);var At=L({name:Ze,props:_t,emits:["change","dragStart","dragEnd"],setup(e,{emit:n,slots:s}){const i=z(),c=z(),t=ce({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let d=!1;const l=yt(),{children:f,linkChildren:u}=De(Ve),o=k(()=>f.length),S=k(()=>t[e.vertical?"height":"width"]),v=k(()=>e.vertical?l.deltaY.value:l.deltaX.value),$=k(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-S.value*o.value:0),b=k(()=>S.value?Math.ceil(Math.abs($.value)/S.value):o.value),C=k(()=>o.value*S.value),m=k(()=>(t.active+o.value)%o.value),O=k(()=>{const r=e.vertical?"vertical":"horizontal";return l.direction.value===r}),y=k(()=>{const r={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(S.value){const T=e.vertical?"height":"width",x=e.vertical?"width":"height";r[T]=`${C.value}px`,r[x]=e[x]?`${e[x]}px`:""}return r}),Z=r=>{const{active:T}=t;return r?e.loop?me(T+r,-1,o.value):me(T+r,0,b.value):T},V=(r,T=0)=>{let x=r*S.value;e.loop||(x=Math.min(x,-$.value));let _=T-x;return e.loop||(_=me(_,$.value,0)),_},R=({pace:r=0,offset:T=0,emitChange:x})=>{if(o.value<=1)return;const{active:_}=t,a=Z(r),h=V(a,T);if(e.loop){if(f[0]&&h!==$.value){const w=h<$.value;f[0].setOffset(w?C.value:0)}if(f[o.value-1]&&h!==0){const w=h>0;f[o.value-1].setOffset(w?-C.value:0)}}t.active=a,t.offset=h,x&&a!==_&&n("change",m.value)},N=()=>{t.swiping=!0,t.active<=-1?R({pace:o.value}):t.active>=o.value&&R({pace:-o.value})},X=()=>{N(),l.reset(),ee(()=>{t.swiping=!1,R({pace:-1,emitChange:!0})})},Q=()=>{N(),l.reset(),ee(()=>{t.swiping=!1,R({pace:1,emitChange:!0})})};let Y;const B=()=>clearTimeout(Y),j=()=>{B(),+e.autoplay>0&&o.value>1&&(Y=setTimeout(()=>{Q(),j()},+e.autoplay))},E=(r=+e.initialSwipe)=>{if(!i.value)return;const T=()=>{var x,_;if(!te(i)){const a={width:i.value.offsetWidth,height:i.value.offsetHeight};t.rect=a,t.width=+((x=e.width)!=null?x:a.width),t.height=+((_=e.height)!=null?_:a.height)}o.value&&(r=Math.min(o.value-1,r),r===-1&&(r=o.value-1)),t.active=r,t.swiping=!0,t.offset=V(r),f.forEach(a=>{a.setOffset(0)}),j()};te(i)?F().then(T):T()},q=()=>E(t.active);let G;const ue=r=>{!e.touchable||r.touches.length>1||(l.start(r),d=!1,G=Date.now(),B(),N())},de=r=>{e.touchable&&t.swiping&&(l.move(r),O.value&&(!e.loop&&(t.active===0&&v.value>0||t.active===o.value-1&&v.value<0)||(at(r,e.stopPropagation),R({offset:v.value}),d||(n("dragStart",{index:m.value}),d=!0))))},ne=()=>{if(!e.touchable||!t.swiping)return;const r=Date.now()-G,T=v.value/r;if((Math.abs(T)>.25||Math.abs(v.value)>S.value/2)&&O.value){const _=e.vertical?l.offsetY.value:l.offsetX.value;let a=0;e.loop?a=_>0?v.value>0?-1:1:0:a=-Math[v.value>0?"ceil":"floor"](v.value/S.value),R({pace:a,emitChange:!0})}else v.value&&R({pace:0});d=!1,t.swiping=!1,n("dragEnd",{index:m.value}),j()},fe=(r,T={})=>{N(),l.reset(),ee(()=>{let x;e.loop&&r===o.value?x=t.active===0?0:r:x=r%o.value,T.immediate?ee(()=>{t.swiping=!1}):t.swiping=!1,R({pace:x-t.active,emitChange:!0})})},ve=(r,T)=>{const x=T===m.value,_=x?{backgroundColor:e.indicatorColor}:void 0;return g("i",{style:_,class:le("indicator",{active:x})},null)},he=()=>{if(s.indicator)return s.indicator({active:m.value,total:o.value});if(e.showIndicators&&o.value>1)return g("div",{class:le("indicators",{vertical:e.vertical})},[Array(o.value).fill("").map(ve)])};return ae({prev:X,next:Q,state:t,resize:q,swipeTo:fe}),u({size:S,props:e,count:o,activeIndicator:m}),P(()=>e.initialSwipe,r=>E(+r)),P(o,()=>E(t.active)),P(()=>e.autoplay,j),P([Te,Le,()=>e.width,()=>e.height],q),P(tt(),r=>{r==="visible"?j():B()}),xe(E),Me(()=>E(t.active)),Ue(()=>E(t.active)),Pe(B),ze(B),Se("touchmove",de,{target:c}),()=>{var r;return g("div",{ref:i,class:le()},[g("div",{ref:c,style:y.value,class:le("track",{vertical:e.vertical}),onTouchstartPassive:ue,onTouchend:ne,onTouchcancel:ne},[(r=s.default)==null?void 0:r.call(s)]),he()])}}});const Pt=U(At),[zt,Ie]=D("tabs");var Wt=L({name:zt,props:{count:ge(Number),inited:Boolean,animated:Boolean,duration:ge(W),swipeable:Boolean,lazyRender:Boolean,currentIndex:ge(Number)},emits:["change"],setup(e,{emit:n,slots:s}){const i=z(),c=l=>n("change",l),t=()=>{var l;const f=(l=s.default)==null?void 0:l.call(s);return e.animated||e.swipeable?g(Pt,{ref:i,loop:!1,class:Ie("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:c},{default:()=>[f]}):f},d=l=>{const f=i.value;f&&f.state.active!==l&&f.swipeTo(l,{immediate:!e.inited})};return P(()=>e.currentIndex,d),xe(()=>{d(e.currentIndex)}),ae({swipeRef:i}),()=>g("div",{class:Ie("content",{animated:e.animated||e.swipeable})},[t()])}});const[je,oe]=D("tabs"),Ot={type:se("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:M(0),duration:M(.3),animated:Boolean,ellipsis:H,swipeable:Boolean,scrollspy:Boolean,offsetTop:M(0),background:String,lazyRender:H,showHeader:H,lineWidth:W,lineHeight:W,beforeChange:Function,swipeThreshold:M(5),titleActiveColor:String,titleInactiveColor:String},qe=Symbol(je);var Et=L({name:je,props:Ot,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:s}){let i,c,t,d,l;const f=z(),u=z(),o=z(),S=z(),v=Fe(),$=Oe(f),[b,C]=kt(),{children:m,linkChildren:O}=De(qe),y=ce({inited:!1,position:"",lineStyle:{},currentIndex:-1}),Z=k(()=>m.length>+e.swipeThreshold||!e.ellipsis||e.shrink),V=k(()=>({borderColor:e.color,background:e.background})),R=(a,h)=>{var w;return(w=a.name)!=null?w:h},N=k(()=>{const a=m[y.currentIndex];if(a)return R(a,y.currentIndex)}),X=k(()=>Ee(e.offsetTop)),Q=k(()=>e.sticky?X.value+i:0),Y=a=>{const h=u.value,w=b.value;if(!Z.value||!h||!w||!w[y.currentIndex])return;const A=w[y.currentIndex].$el,I=A.offsetLeft-(h.offsetWidth-A.offsetWidth)/2;d&&d(),d=Tt(h,I,a?0:+e.duration)},B=()=>{const a=y.inited;F(()=>{const h=b.value;if(!h||!h[y.currentIndex]||e.type!=="line"||te(f.value))return;const w=h[y.currentIndex].$el,{lineWidth:A,lineHeight:I}=e,p=w.offsetLeft+w.offsetWidth/2,K={width:re(A),backgroundColor:e.color,transform:`translateX(${p}px) translateX(-50%)`};if(a&&(K.transitionDuration=`${e.duration}s`),ye(I)){const ie=re(I);K.height=ie,K.borderRadius=ie}y.lineStyle=K})},j=a=>{const h=a<y.currentIndex?-1:1;for(;a>=0&&a<m.length;){if(!m[a].disabled)return a;a+=h}},E=(a,h)=>{const w=j(a);if(!ye(w))return;const A=m[w],I=R(A,w),p=y.currentIndex!==null;y.currentIndex!==w&&(y.currentIndex=w,h||Y(),B()),I!==e.active&&(n("update:active",I),p&&n("change",I,A.title)),t&&!e.scrollspy&&nt(Math.ceil($e(f.value)-X.value))},q=(a,h)=>{const w=m.findIndex((A,I)=>R(A,I)===a);E(w===-1?0:w,h)},G=(a=!1)=>{if(e.scrollspy){const h=m[y.currentIndex].$el;if(h&&$.value){const w=$e(h,$.value)-Q.value;c=!0,l&&l(),l=xt($.value,w,a?0:+e.duration,()=>{c=!1})}}},ue=(a,h,w)=>{const{title:A,disabled:I}=m[h],p=R(m[h],h);I||(St(e.beforeChange,{args:[p],done:()=>{E(h),G()}}),ht(a)),n("clickTab",{name:p,title:A,event:w,disabled:I})},de=a=>{t=a.isFixed,n("scroll",a)},ne=a=>{F(()=>{q(a),G(!0)})},fe=()=>{for(let a=0;a<m.length;a++){const{top:h}=J(m[a].$el);if(h>Q.value)return a===0?0:a-1}return m.length-1},ve=()=>{if(e.scrollspy&&!c){const a=fe();E(a)}},he=()=>{if(e.type==="line"&&m.length)return g("div",{class:oe("line"),style:y.lineStyle},null)},r=()=>{var a,h,w;const{type:A,border:I,sticky:p}=e,K=[g("div",{ref:p?void 0:o,class:[oe("wrap"),{[bt]:A==="line"&&I}]},[g("div",{ref:u,role:"tablist",class:oe("nav",[A,{shrink:e.shrink,complete:Z.value}]),style:V.value,"aria-orientation":"horizontal"},[(a=s["nav-left"])==null?void 0:a.call(s),m.map(ie=>ie.renderTitle(ue)),he(),(h=s["nav-right"])==null?void 0:h.call(s)])]),(w=s["nav-bottom"])==null?void 0:w.call(s)];return p?g("div",{ref:o},[K]):K},T=()=>{B(),F(()=>{var a,h;Y(!0),(h=(a=S.value)==null?void 0:a.swipeRef.value)==null||h.resize()})};P(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],B),P(Te,T),P(()=>e.active,a=>{a!==N.value&&q(a)}),P(()=>m.length,()=>{y.inited&&(q(e.active),B(),F(()=>{Y(!0)}))});const x=()=>{q(e.active,!0),F(()=>{y.inited=!0,o.value&&(i=J(o.value).height),Y(!0)})},_=(a,h)=>n("rendered",a,h);return ae({resize:T,scrollTo:ne}),Me(B),Ue(B),We(x),Ye(f,B),Se("scroll",ve,{target:$,passive:!0}),O({id:v,props:e,setLine:B,scrollable:Z,onRendered:_,currentName:N,setTitleRefs:C,scrollIntoView:Y}),()=>g("div",{ref:f,class:oe([e.type])},[e.showHeader?e.sticky?g(Bt,{container:f.value,offsetTop:X.value,onScroll:de},{default:()=>[r()]}):r():null,g(Wt,{ref:S,count:m.length,inited:y.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:y.currentIndex,onChange:E},{default:()=>{var a;return[(a=s.default)==null?void 0:a.call(s)]}})])}});const[Ht,Re]=D("tab"),Lt=L({name:Ht,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:W,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:H},setup(e,{slots:n}){const s=k(()=>{const c={},{type:t,color:d,disabled:l,isActive:f,activeColor:u,inactiveColor:o}=e;d&&t==="card"&&(c.borderColor=d,l||(f?c.backgroundColor=d:c.color=d));const v=f?u:o;return v&&(c.color=v),c}),i=()=>{const c=g("span",{class:Re("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||ye(e.badge)&&e.badge!==""?g(wt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[c]}):c};return()=>g("div",{id:e.id,role:"tab",class:[Re([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:s.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[i()])}}),[Dt,Mt]=D("swipe-item");var Nt=L({name:Dt,setup(e,{slots:n}){let s;const i=ce({offset:0,inited:!1,mounted:!1}),{parent:c,index:t}=Ne(Ve);if(!c)return;const d=k(()=>{const u={},{vertical:o}=c.props;return c.size.value&&(u[o?"height":"width"]=`${c.size.value}px`),i.offset&&(u.transform=`translate${o?"Y":"X"}(${i.offset}px)`),u}),l=k(()=>{const{loop:u,lazyRender:o}=c.props;if(!o||s)return!0;if(!i.mounted)return!1;const S=c.activeIndicator.value,v=c.count.value-1,$=S===0&&u?v:S-1,b=S===v&&u?0:S+1;return s=t.value===S||t.value===$||t.value===b,s}),f=u=>{i.offset=u};return xe(()=>{F(()=>{i.mounted=!0})}),ae({setOffset:f}),()=>{var u;return g("div",{class:Mt(),style:d.value},[l.value?(u=n.default)==null?void 0:u.call(n):null])}}});const pt=U(Nt),[Ft,be]=D("tab"),Ut=He({},mt,{dot:Boolean,name:W,badge:W,title:String,disabled:Boolean,titleClass:rt,titleStyle:[String,Object],showZeroBadge:H});var Xt=L({name:Ft,props:Ut,setup(e,{slots:n}){const s=Fe(),i=z(!1),c=ot(),{parent:t,index:d}=Ne(qe);if(!t)return;const l=()=>{var b;return(b=e.name)!=null?b:d.value},f=()=>{i.value=!0,t.props.lazyRender&&F(()=>{t.onRendered(l(),e.title)})},u=k(()=>{const b=l()===t.currentName.value;return b&&!i.value&&f(),b}),o=z(""),S=z("");it(()=>{const{titleClass:b,titleStyle:C}=e;o.value=b?st(b):"",S.value=C&&typeof C!="string"?ct(ut(C)):C});const v=b=>g(Lt,pe({key:s,id:`${t.id}-${d.value}`,ref:t.setTitleRefs(d.value),style:S.value,class:o.value,isActive:u.value,controls:s,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:C=>b(c.proxy,d.value,C)},Ce(t.props,["type","color","shrink"]),Ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),$=z(!u.value);return P(u,b=>{b?$.value=!1:ee(()=>{$.value=!0})}),P(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),gt(u),ae({id:s,renderTitle:v}),()=>{var b;const C=`${t.id}-${d.value}`,{animated:m,swipeable:O,scrollspy:y,lazyRender:Z}=t.props;if(!n.default&&!m)return;const V=y||u.value;if(m||O)return g(pt,{id:s,role:"tabpanel",class:be("panel-wrapper",{inactive:$.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":C,"data-allow-mismatch":"attribute"},{default:()=>{var X;return[g("div",{class:be("panel")},[(X=n.default)==null?void 0:X.call(n)])]}});const N=i.value||y||!Z?(b=n.default)==null?void 0:b.call(n):null;return lt(g("div",{id:s,role:"tabpanel",class:be("panel"),tabindex:V?0:-1,"aria-labelledby":C,"data-allow-mismatch":"attribute"},[N]),[[dt,V]])}}});const ka=U(Xt),$a=U(Et),[Yt,Zt]=D("skeleton-title"),Vt={round:Boolean,titleWidth:W};var jt=L({name:Yt,props:Vt,setup(e){return()=>g("h3",{class:Zt([{round:e.round}]),style:{width:re(e.titleWidth)}},null)}});const qt=U(jt);var Kt=qt;const[Jt,Qt]=D("skeleton-avatar"),Gt={avatarSize:W,avatarShape:se("round")};var ea=L({name:Jt,props:Gt,setup(e){return()=>g("div",{class:Qt([e.avatarShape]),style:ft(e.avatarSize)},null)}});const ta=U(ea);var aa=ta;const ke="100%",na={round:Boolean,rowWidth:{type:W,default:ke}},[ia,la]=D("skeleton-paragraph");var oa=L({name:ia,props:na,setup(e){return()=>g("div",{class:la([{round:e.round}]),style:{width:e.rowWidth}},null)}});const ra=U(oa);var sa=ra;const[ca,Be]=D("skeleton"),ua="60%",da={row:M(0),round:Boolean,title:Boolean,titleWidth:W,avatar:Boolean,avatarSize:W,avatarShape:se("round"),loading:H,animate:H,rowWidth:{type:[Number,String,Array],default:ke}};var fa=L({name:ca,inheritAttrs:!1,props:da,setup(e,{slots:n,attrs:s}){const i=()=>{if(e.avatar)return g(aa,{avatarShape:e.avatarShape,avatarSize:e.avatarSize},null)},c=()=>{if(e.title)return g(Kt,{round:e.round,titleWidth:e.titleWidth},null)},t=f=>{const{rowWidth:u}=e;return u===ke&&f===+e.row-1?ua:Array.isArray(u)?u[f]:u},d=()=>Array(+e.row).fill("").map((f,u)=>g(sa,{key:u,round:e.round,rowWidth:re(t(u))},null)),l=()=>n.template?n.template():g(vt,null,[i(),g("div",{class:Be("content")},[c(),d()])]);return()=>{var f;return e.loading?g("div",pe({class:Be({animate:e.animate,round:e.round})},s),[l()]):(f=n.default)==null?void 0:f.call(n)}}});const Ca=U(fa),Ke="https://www.sapi.run",Ia=()=>Xe({url:Ke+"/hero/getHeroList.php",method:"get"}),Ra=(e,n)=>Xe({url:Ke+"/hero/select.php",method:"get",params:{hero:e,type:n}});export{Pt as S,$a as T,pt as a,ka as b,Ca as c,ra as d,Ra as e,Ia as g};
