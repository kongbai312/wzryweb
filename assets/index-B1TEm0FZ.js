import{A as Y,d as A,Y as $,x as R,q as se,k as V,b as l,a9 as ae,I as L,r as x,ai as he,w as D,am as _e,D as Q,M as Z,v as ie,an as re,P as K,a1 as be,ao as ke,z as J,ap as xe,J as Se,N as Ce,aq as we,L as Me,a7 as ye,aj as Pe,g as j,F as X,l as z,H as Te,a as h,e as M,i as G,u as T,m as de,t as ne,o as I,c as oe}from"./index-BcmBz-3v.js";import{a as Ve,T as Ie}from"./index-D09t30Gq.js";import{_ as Be}from"./narback.vue_vue_type_script_setup_true_lang-C3Vgv0jC.js";import{s as Ee,C as me}from"./index-C-IuPqPa.js";import{m as W}from"./vantTool-Cc1NLzpG.js";import{H as ce,L as qe}from"./index-C5Fcd7RL.js";import{c as fe}from"./interceptor-CN8ZFYrj.js";import{B as ve}from"./index-5eYX_Fks.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as Ne,D as ze}from"./index-DcKTjzis.js";import"./index-Cs-won2j.js";import{u as $e}from"./function-call-DPzwNvGn.js";import{u as je}from"./use-expose-CJLuzQjk.js";import"./use-placeholder-ClU4AgVv.js";import"./on-popup-reopen-b_mukz0S.js";import"./use-route-D5E7MjTX.js";import"./index-DL3Fdz03.js";import"./use-id-B6E0c3HK.js";import"./use-scope-id-Cm6FhUjB.js";const ge=Y(Ee),[Fe,ee]=se("progress"),Re={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:R,pivotColor:String,trackColor:String,strokeWidth:$,percentage:{type:$,default:0,validator:t=>+t>=0&&+t<=100}};var Le=A({name:Fe,props:Re,setup(t){const n=V(()=>t.inactive?void 0:t.color),c=d=>Math.min(Math.max(+d,0),100),m=()=>{const{textColor:d,pivotText:f,pivotColor:o,percentage:u}=t,_=c(u),b=f??`${u}%`;if(t.showPivot&&b){const i={color:d,left:`${_}%`,transform:`translate(-${_}%,-50%)`,background:o||n.value};return l("span",{style:i,class:ee("pivot",{inactive:t.inactive})},[b])}};return()=>{const{trackColor:d,percentage:f,strokeWidth:o}=t,u=c(f),_={background:d,height:ae(o)},b={width:`${u}%`,background:n.value};return l("div",{class:ee(),style:_},[l("span",{class:ee("portion",{inactive:t.inactive}),style:b},null),m()])}}});const Ae=Y(Le),[De,O]=se("stepper"),We=200,U=(t,n)=>String(t)===String(n),Ge={min:L(1),max:L(1/0),name:L(""),step:L(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:R,showMinus:R,showInput:R,longPress:R,autoFixed:R,allowEmpty:Boolean,modelValue:$,inputWidth:$,buttonSize:$,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:L(1),decimalLength:$};var He=A({name:De,props:Ge,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:n}){const c=(e,s=!0)=>{const{min:p,max:F,allowEmpty:w,decimalLength:H}=t;return w&&e===""||(e=re(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+p:e,e=s?Math.max(Math.min(+F,e),+p):e,K(H)&&(e=e.toFixed(+H))),e},m=()=>{var e;const s=(e=t.modelValue)!=null?e:t.defaultValue,p=c(s);return U(p,t.modelValue)||n("update:modelValue",p),p};let d;const f=x(),o=x(m()),u=V(()=>t.disabled||t.disableMinus||+o.value<=+t.min),_=V(()=>t.disabled||t.disablePlus||+o.value>=+t.max),b=V(()=>({width:ae(t.inputWidth),height:ae(t.buttonSize)})),i=V(()=>he(t.buttonSize)),S=()=>{const e=c(o.value);U(e,o.value)||(o.value=e)},y=e=>{t.beforeChange?fe(t.beforeChange,{args:[e],done(){o.value=e}}):o.value=e},P=()=>{if(d==="plus"&&_.value||d==="minus"&&u.value){n("overlimit",d);return}const e=d==="minus"?-t.step:+t.step,s=c(xe(+o.value,e));y(s),n(d)},B=e=>{const s=e.target,{value:p}=s,{decimalLength:F}=t;let w=re(String(p),!t.integer);if(K(F)&&w.includes(".")){const ue=w.split(".");w=`${ue[0]}.${ue[1].slice(0,+F)}`}t.beforeChange?s.value=String(o.value):U(p,w)||(s.value=w);const H=w===String(+w);y(H?+w:w)},q=e=>{var s;t.disableInput?(s=f.value)==null||s.blur():n("focus",e)},v=e=>{const s=e.target,p=c(s.value,t.autoFixed);s.value=String(p),o.value=p,be(()=>{n("blur",e),ke()})};let a,r;const k=()=>{r=setTimeout(()=>{P(),k()},We)},C=()=>{t.longPress&&(a=!1,clearTimeout(r),r=setTimeout(()=>{a=!0,P(),k()},qe))},E=e=>{t.longPress&&(clearTimeout(r),a&&J(e))},N=e=>{t.disableInput&&J(e)},g=e=>({onClick:s=>{J(s),d=e,P()},onTouchstartPassive:()=>{d=e,C()},onTouchend:E,onTouchcancel:E});return D(()=>[t.max,t.min,t.integer,t.decimalLength],S),D(()=>t.modelValue,e=>{U(e,o.value)||(o.value=c(e))}),D(o,e=>{n("update:modelValue",e),n("change",e,{name:t.name})}),_e(()=>t.modelValue),()=>l("div",{role:"group",class:O([t.theme])},[Q(l("button",ie({type:"button",style:i.value,class:[O("minus",{disabled:u.value}),{[ce]:!u.value}],"aria-disabled":u.value||void 0},g("minus")),null),[[Z,t.showMinus]]),Q(l("input",{ref:f,type:t.integer?"tel":"text",role:"spinbutton",class:O("input"),value:o.value,style:b.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,autocomplete:"off","aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":o.value,onBlur:v,onInput:B,onFocus:q,onMousedown:N},null),[[Z,t.showInput]]),Q(l("button",ie({type:"button",style:i.value,class:[O("plus",{disabled:_.value}),{[ce]:!_.value}],"aria-disabled":_.value||void 0},g("plus")),null),[[Z,t.showPlus]])])}});const Oe=Y(He),[Ue,te]=se("swipe-cell"),Je={name:L(""),disabled:Boolean,leftWidth:$,rightWidth:$,beforeClose:Function,stopPropagation:Boolean};var Ke=A({name:Ue,props:Je,emits:["open","close","click"],setup(t,{emit:n,slots:c}){let m,d,f,o;const u=x(),_=x(),b=x(),i=Se({offset:0,dragging:!1}),S=$e(),y=e=>e.value?Ce(e).width:0,P=V(()=>K(t.leftWidth)?+t.leftWidth:y(_)),B=V(()=>K(t.rightWidth)?+t.rightWidth:y(b)),q=e=>{i.offset=e==="left"?P.value:-B.value,m||(m=!0,n("open",{name:t.name,position:e}))},v=e=>{i.offset=0,m&&(m=!1,n("close",{name:t.name,position:e}))},a=e=>{const s=Math.abs(i.offset),p=.15,F=m?1-p:p,w=e==="left"?P.value:B.value;w&&s>w*F?q(e):v(e)},r=e=>{t.disabled||(f=i.offset,S.start(e))},k=e=>{if(t.disabled)return;const{deltaX:s}=S;S.move(e),S.isHorizontal()&&(d=!0,i.dragging=!0,(!m||s.value*f<0)&&J(e,t.stopPropagation),i.offset=ye(s.value+f,-B.value,P.value))},C=()=>{i.dragging&&(i.dragging=!1,a(i.offset>0?"left":"right"),setTimeout(()=>{d=!1},0))},E=(e="outside",s)=>{o||(n("click",e),m&&!d&&(o=!0,fe(t.beforeClose,{args:[{event:s,name:t.name,position:e}],done:()=>{o=!1,v(e)},canceled:()=>o=!1,error:()=>o=!1})))},N=e=>s=>{(d||m)&&s.stopPropagation(),!d&&E(e,s)},g=(e,s)=>{const p=c[e];if(p)return l("div",{ref:s,class:te(e),onClick:N(e)},[p()])};return je({open:q,close:v}),we(u,e=>E("outside",e),{eventName:"touchstart"}),Me("touchmove",k,{target:u}),()=>{var e;const s={transform:`translate3d(${i.offset}px, 0, 0)`,transitionDuration:i.dragging?"0s":".6s"};return l("div",{ref:u,class:te(),onClick:N("cell"),onTouchstartPassive:r,onTouchend:C,onTouchcancel:C},[l("div",{class:te("wrapper"),style:s},[g("left",_),(e=c.default)==null?void 0:e.call(c),g("right",b)])])}}});const Xe=Y(Ke),pe=Pe("xx-bsMaps",()=>({bsMaps:x({bs:{text:"宝石",value:"bs",map:["硬石矿井","十面埋伏","嗖嗖作响"]},jk:{text:"金库",value:"jk",map:["轰隆峡谷","安全区域","烫手山芋"]},sj:{text:"赏金",value:"sj",map:["蝮蛇草场","神秘流星","大运河"]},tt:{text:"淘汰",value:"tt",map:["摇滚贝尔","烈焰凤凰","空旷荒野"]},rq:{text:"热区",value:"rq",map:["开门营业","平行游戏","甲虫决斗"]},zq:{text:"足球",value:"zq",map:["后院球场","三重威胁","绿荫球场"]}})}),{persist:{key:"bs-maps",paths:["bsMaps"]}}),Ye={class:"mode"},Qe={class:"buttonGroup"},Ze={class:"randomButton_container"},et={class:"percentage_container"},tt={key:0,class:"mapShow"},at=A({__name:"bsMap",setup(t){const n=x([]),c=x(),m=()=>{c.value.toggleAll(!0)},d=()=>{c.value.toggleAll()};let f=x(0),o=x(1),u=x(!1);const _=async()=>{for(f.value=0,await new Promise(v=>setTimeout(v,500));f.value<100;){const v=Math.floor(Math.random()*10)+1;f.value+=v,f.value>=100&&(f.value=100),await new Promise(a=>setTimeout(a,50))}u.value=!1},b=pe();let i=V(()=>b.bsMaps),S=x([]);function y(v,a){const r=[],k=new Set;for(;k.size<v;){const C=Math.floor(Math.random()*a.length);k.has(C)||(k.add(C),r.push(a[C]))}return r}const P=()=>{let v={};n.value.forEach(r=>{v[r]=i.value[r].map});let a=o.value;if(a<n.value.length){let r=y(a,n.value);S.value=r.map(k=>({mode:k,value:y(1,v[k])[0]}))}else if(a===n.value.length)S.value=n.value.map(r=>({mode:r,value:y(1,v[r])[0]}));else if(a>n.value.length){let r=n.value.reduce((g,e)=>(g=g+i.value[e].map.length,g),0);if(a>r){W.fail("抽取错误，原因：配置地图的数量少于抽取数量");return}let k=[],C=n.value.map(g=>{let e=y(1,v[g])[0];return v[g].forEach(s=>{s!==e&&k.push({mode:g,value:s})}),{mode:g,value:e}}),E=a-n.value.length,N=y(E,k);S.value=[...C,...N]}},B=async()=>{if(u.value){W.info("当前正在抽取");return}if(n.value.length===0){W.info("模式不能为空");return}S.value=[],u.value=!0,await _(),P()},q=v=>({bs:"宝石：",jk:"金库：",rq:"热区：",sj:"赏金：",tt:"淘汰：",zq:"足球："})[v]||"";return(v,a)=>{const r=me,k=ge,C=ve,E=Oe,N=Ae;return I(),j(X,null,[a[13]||(a[13]=z("div",{class:"title"},"地图抽取工具",-1)),z("div",Ye,[a[12]||(a[12]=z("span",{class:"modetext"},"模式：",-1)),l(k,{ref_key:"checkboxGroup",ref:c,class:"modeGroup",modelValue:T(n),"onUpdate:modelValue":a[0]||(a[0]=g=>G(n)?n.value=g:null),direction:"horizontal"},{default:h(()=>[l(r,{class:"modeItem",name:"bs"},{default:h(()=>[...a[2]||(a[2]=[M("宝石",-1)])]),_:1}),l(r,{class:"modeItem",name:"jk"},{default:h(()=>[...a[3]||(a[3]=[M("金库",-1)])]),_:1}),l(r,{class:"modeItem",name:"sj"},{default:h(()=>[...a[4]||(a[4]=[M("赏金",-1)])]),_:1}),l(r,{class:"modeItem",name:"tt"},{default:h(()=>[...a[5]||(a[5]=[M("淘汰",-1)])]),_:1}),l(r,{class:"modeItem",name:"rq"},{default:h(()=>[...a[6]||(a[6]=[M("热区",-1)])]),_:1}),l(r,{class:"modeItem",name:"zq"},{default:h(()=>[...a[7]||(a[7]=[M("足球",-1)])]),_:1})]),_:1},8,["modelValue"]),z("div",Qe,[l(C,{type:"primary",onClick:m},{default:h(()=>[...a[8]||(a[8]=[M("全选",-1)])]),_:1}),l(C,{type:"primary",onClick:d},{default:h(()=>[...a[9]||(a[9]=[M("反选",-1)])]),_:1})]),z("div",Ze,[a[11]||(a[11]=M(" 数量：",-1)),l(E,{modelValue:T(o),"onUpdate:modelValue":a[1]||(a[1]=g=>G(o)?o.value=g:o=g),min:"1",max:"7",integer:""},null,8,["modelValue"]),l(C,{round:"",type:"success",class:"randomButton",onClick:B},{default:h(()=>[...a[10]||(a[10]=[M("抽取",-1)])]),_:1})]),z("div",et,[l(N,{percentage:T(f),"stroke-width":"8"},null,8,["percentage"])])]),T(S).length!==0?(I(),j("div",tt,[(I(!0),j(X,null,de(T(S),(g,e)=>(I(),j("span",{class:"mapItem",key:e},ne(q(g.mode))+ne(g.value),1))),128))])):Te("",!0)],64)}}}),nt=le(at,[["__scopeId","data-v-c655161b"]]),ot={class:"bsMapSetting_container"},st={class:"dropdown_container"},lt=1,ut=A({__name:"bsMapSetting",setup(t){let n=x([{text:"宝石",value:"bs"},{text:"金库",value:"jk"},{text:"赏金",value:"sj"},{text:"淘汰",value:"tt"},{text:"热区",value:"rq"},{text:"足球",value:"zq"}]),c=x("bs");const m={bs:{name:"bs",value:["硬石矿井","水晶街机厅","戈壁陷阱","宝石要塞","十面埋伏","嗖嗖作响","矿车飞驰","乡趣游乐场","开阔地带","终点站","清理森林","更酷的硬石矿井"]},jk:{name:"jk",value:["轰隆峡谷","安全区域","烫手山芋","遥远的桥","超大湖泊","重制废屋"]},sj:{name:"sj",value:["蝮蛇草场","神秘流星","草丛迷踪","大运河","夹心蛋糕","责任自负"]},tt:{name:"tt",value:["金臂峡谷","摇滚贝尔","烈焰凤凰","空旷荒野","新地平线","四重关卡","中心字母","两河并行","森林深处","袖珍岛屿","咆哮神庙","青翠废墟"]},rq:{name:"rq",value:["开门营业","平行游戏","灼热火圈","甲虫决斗","水上运动","吵闹领居"]},zq:{name:"zq",value:["后院球场","三重威胁","精准射门","绿荫球场","超级海滩","梦幻弹珠","中心舞台","沙滩足球","阳光球场","点球大战","二次进攻","十字球场"]}};let d=V(()=>m[c.value].value);const f=pe();let o=V(()=>f.bsMaps),u=x([]);u.value=o.value[c.value].map,D(()=>c.value,(b,i)=>{o.value[i].map=u.value,u.value=o.value[b].map}),D(()=>u.value,(b,i)=>{b.length<lt&&(W.info("地图最小选择数量为1"),u.value=i)});const _=()=>{o.value[c.value].map=u.value,W.success("保存成功")};return(b,i)=>{const S=Ne,y=ze,P=ve,B=me,q=Xe,v=ge;return I(),j("div",ot,[z("div",st,[l(y,null,{default:h(()=>[l(S,{modelValue:T(c),"onUpdate:modelValue":i[0]||(i[0]=a=>G(c)?c.value=a:c=a),options:T(n)},null,8,["modelValue","options"])]),_:1}),l(P,{class:"save_button",type:"success",onClick:_},{default:h(()=>[...i[2]||(i[2]=[M("保存",-1)])]),_:1})]),l(v,{class:"mapGroup",modelValue:T(u),"onUpdate:modelValue":i[1]||(i[1]=a=>G(u)?u.value=a:u=a)},{default:h(()=>[(I(!0),j(X,null,de(T(d),(a,r)=>(I(),oe(q,{class:"mapsItem",key:r},{right:h(()=>[l(P,{square:"",text:"删除",type:"danger",class:"delete-button"})]),default:h(()=>[l(B,{class:"mapItem",name:a},{default:h(()=>[M(ne(a),1)]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue"])])}}}),it=le(ut,[["__scopeId","data-v-41d52e8d"]]),rt={class:"bs_container bs_container_size"},ct=A({__name:"index",setup(t){let n=x("home");return(c,m)=>{const d=Be,f=Ie,o=Ve;return I(),j(X,null,[l(d),z("div",rt,[T(n)==="home"?(I(),oe(nt,{key:0})):(I(),oe(it,{key:1}))]),l(o,{modelValue:T(n),"onUpdate:modelValue":m[0]||(m[0]=u=>G(n)?n.value=u:n=u)},{default:h(()=>[l(f,{icon:"home-o",name:"home"},{default:h(()=>[...m[1]||(m[1]=[M("主页",-1)])]),_:1}),l(f,{icon:"setting-o",name:"setting"},{default:h(()=>[...m[2]||(m[2]=[M("配置",-1)])]),_:1})]),_:1},8,["modelValue"])],64)}}}),It=le(ct,[["__scopeId","data-v-dcb841cf"]]);export{It as default};
