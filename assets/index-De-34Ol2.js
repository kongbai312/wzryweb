import{I as bt}from"./index-Ck4OSXI3.js";import{d as U,x as L,q as W,r as N,a4 as wt,b as B,A as K,p as j,ac as Ct,k as X,y as G,Y as I,ae as St,a9 as F,P as Bt,w as Et,V as rt,X as xt,j as Tt,a1 as tt,D as _t,C as kt,v as H,J as At,ak as Pt,s as Ot,af as Lt,al as et,am as Dt}from"./index-Dx7gVCDM.js";import{m as J}from"./vantTool--bcjO0Xc.js";import{B as q,m as Rt,u as It}from"./index-0yHTpUBq.js";import{P as Nt,p as jt,a as Mt}from"./index-CAETCE2G.js";import{u as zt}from"./use-placeholder-C8EWTx8E.js";import{u as $t}from"./use-expose-DnYapoKH.js";import{u as Ft,a as Ht,b as Ut,c as Wt}from"./use-route-DMWcdgNY.js";import{c as Kt}from"./interceptor-CtbgOAHX.js";const[at,nt]=W("action-bar"),it=Symbol(at),Yt={placeholder:Boolean,safeAreaInsetBottom:L};var Vt=U({name:at,props:Yt,setup(e,{slots:S}){const g=N(),h=zt(g,nt),{linkChildren:m}=wt(it);m();const i=()=>{var a;return B("div",{ref:g,class:[nt(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(a=S.default)==null?void 0:a.call(S)])};return()=>e.placeholder?h(i):i()}});const Xt=K(Vt),[Gt,Jt]=W("action-bar-button"),qt=j({},Ht,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Qt=U({name:Gt,props:qt,setup(e,{slots:S}){const g=Ft(),{parent:h,index:m}=Ct(it),i=X(()=>{if(h){const t=h.children[m.value-1];return!(t&&"isButton"in t)}}),a=X(()=>{if(h){const t=h.children[m.value+1];return!(t&&"isButton"in t)}});return $t({isButton:!0}),()=>{const{type:t,icon:l,text:u,color:y,loading:w,disabled:b}=e;return B(q,{class:Jt([t,{last:a.value,first:i.value}]),size:"large",type:t,icon:l,color:y,loading:w,disabled:b,onClick:g},{default:()=>[S.default?S.default():u]})}}});const ot=K(Qt),[Zt,O]=W("image"),te={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:I,height:I,radius:I,lazyLoad:Boolean,iconSize:I,showError:L,errorIcon:G("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:G("photo"),crossorigin:String,referrerpolicy:String};var ee=U({name:Zt,props:te,emits:["load","error"],setup(e,{emit:S,slots:g}){const h=N(!1),m=N(!0),i=N(),{$Lazyload:a}=St().proxy,t=X(()=>{const o={width:F(e.width),height:F(e.height)};return Bt(e.radius)&&(o.overflow="hidden",o.borderRadius=F(e.radius)),o});Et(()=>e.src,()=>{h.value=!1,m.value=!0});const l=o=>{m.value&&(m.value=!1,S("load",o))},u=()=>{const o=new Event("load");Object.defineProperty(o,"target",{value:i.value,enumerable:!0}),l(o)},y=o=>{h.value=!0,m.value=!1,S("error",o)},w=(o,s,E)=>E?E():B(bt,{name:o,size:e.iconSize,class:s,classPrefix:e.iconPrefix},null),b=()=>{if(m.value&&e.showLoading)return B("div",{class:O("loading")},[w(e.loadingIcon,O("loading-icon"),g.loading)]);if(h.value&&e.showError)return B("div",{class:O("error")},[w(e.errorIcon,O("error-icon"),g.error)])},x=()=>{if(h.value||!e.src)return;const o={alt:e.alt,class:O("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?_t(B("img",H({ref:i},o),null),[[kt("lazy"),e.src]]):B("img",H({ref:i,src:e.src,onLoad:l,onError:y},o),null)},p=({el:o})=>{const s=()=>{o===i.value&&m.value&&u()};i.value?s():tt(s)},C=({el:o})=>{o===i.value&&!h.value&&y()};return a&&rt&&(a.$on("loaded",p),a.$on("error",C),xt(()=>{a.$off("loaded",p),a.$off("error",C)})),Tt(()=>{tt(()=>{var o;(o=i.value)!=null&&o.complete&&!e.lazyLoad&&u()})}),()=>{var o;return B("div",{class:O({round:e.round,block:e.block}),style:t.value},[x(),b(),(o=g.default)==null?void 0:o.call(g)])}}});const xe=K(ee),[ne,k,$]=W("dialog"),oe=j({},jt,{title:String,theme:String,width:I,message:[String,Function],callback:Function,allowHtml:Boolean,className:Lt,transition:G("van-dialog-bounce"),messageAlign:String,closeOnPopstate:L,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:L,closeOnClickOverlay:Boolean,keyboardEnabled:L}),re=[...Mt,"transition","closeOnPopstate"];var ct=U({name:ne,props:oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:S,slots:g}){const h=N(),m=At({confirm:!1,cancel:!1}),i=s=>S("update:show",s),a=s=>{var E;i(!1),(E=e.callback)==null||E.call(e,s)},t=s=>()=>{e.show&&(S(s),e.beforeClose?(m[s]=!0,Kt(e.beforeClose,{args:[s],done(){a(s),m[s]=!1},canceled(){m[s]=!1}})):a(s))},l=t("cancel"),u=t("confirm"),y=Pt(s=>{var E,A;if(!e.keyboardEnabled||s.target!==((A=(E=h.value)==null?void 0:E.popupRef)==null?void 0:A.value))return;({Enter:e.showConfirmButton?u:et,Escape:e.showCancelButton?l:et})[s.key](),S("keydown",s)},["enter","esc"]),w=()=>{const s=g.title?g.title():e.title;if(s)return B("div",{class:k("header",{isolated:!e.message&&!g.default})},[s])},b=s=>{const{message:E,allowHtml:A,messageAlign:T}=e,P=k("message",{"has-title":s,[T]:T}),D=Dt(E)?E():E;return A&&typeof D=="string"?B("div",{class:P,innerHTML:D},null):B("div",{class:P},[D])},x=()=>{if(g.default)return B("div",{class:k("content")},[g.default()]);const{title:s,message:E,allowHtml:A}=e;if(E){const T=!!(s||g.title);return B("div",{key:A?1:0,class:k("content",{isolated:!T})},[b(T)])}},p=()=>B("div",{class:[Wt,k("footer")]},[e.showCancelButton&&B(q,{size:"large",text:e.cancelButtonText||$("cancel"),class:k("cancel"),style:{color:e.cancelButtonColor},loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:l},null),e.showConfirmButton&&B(q,{size:"large",text:e.confirmButtonText||$("confirm"),class:[k("confirm"),{[Ut]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),C=()=>B(Xt,{class:k("footer")},{default:()=>[e.showCancelButton&&B(ot,{type:"warning",text:e.cancelButtonText||$("cancel"),class:k("cancel"),color:e.cancelButtonColor,loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:l},null),e.showConfirmButton&&B(ot,{type:"danger",text:e.confirmButtonText||$("confirm"),class:k("confirm"),color:e.confirmButtonColor,loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),o=()=>g.footer?g.footer():e.theme==="round-button"?C():p();return()=>{const{width:s,title:E,theme:A,message:T,className:P}=e;return B(Nt,H({ref:h,role:"dialog",class:[k([A]),P],style:{width:F(s)},tabindex:0,"aria-labelledby":E||T,onKeydown:y,"onUpdate:show":i},Ot(e,re)),{default:()=>[w(),x(),o()]})}}});let Q;const ae={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ie=j({},ae);function ce(){({instance:Q}=Rt({setup(){const{state:S,toggle:g}=It();return()=>B(ct,H(S,{"onUpdate:show":g}),null)}}))}function le(e){return rt?new Promise((S,g)=>{Q||ce(),Q.open(j({},ie,e,{callback:h=>{(h==="confirm"?S:g)(h)}}))}):Promise.resolve(void 0)}const ue=e=>le(j({showCancelButton:!0},e)),Te=K(ct);var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lt={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(e,S){(function(h,m){e.exports=m()})(se,function(){return function(){var g={686:function(i,a,t){t.d(a,{default:function(){return pt}});var l=t(279),u=t.n(l),y=t(370),w=t.n(y),b=t(817),x=t.n(b);function p(d){try{return document.execCommand(d)}catch{return!1}}var C=function(r){var n=x()(r);return p("cut"),n},o=C;function s(d){var r=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[r?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(c,"px"),n.setAttribute("readonly",""),n.value=d,n}var E=function(r,n){var c=s(r);n.container.appendChild(c);var f=x()(c);return p("copy"),c.remove(),f},A=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},c="";return typeof r=="string"?c=E(r,n):r instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(r==null?void 0:r.type)?c=E(r.value,n):(c=x()(r),p("copy")),c},T=A;function P(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(n){return typeof n}:P=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},P(d)}var D=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.action,c=n===void 0?"copy":n,f=r.container,v=r.target,_=r.text;if(c!=="copy"&&c!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(v!==void 0)if(v&&P(v)==="object"&&v.nodeType===1){if(c==="copy"&&v.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(c==="cut"&&(v.hasAttribute("readonly")||v.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(_)return T(_,{container:f});if(v)return c==="cut"?o(v):T(v,{container:f})},ut=D;function R(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(n){return typeof n}:R=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},R(d)}function st(d,r){if(!(d instanceof r))throw new TypeError("Cannot call a class as a function")}function Z(d,r){for(var n=0;n<r.length;n++){var c=r[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(d,c.key,c)}}function ft(d,r,n){return r&&Z(d.prototype,r),n&&Z(d,n),d}function dt(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(r&&r.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),r&&Y(d,r)}function Y(d,r){return Y=Object.setPrototypeOf||function(c,f){return c.__proto__=f,c},Y(d,r)}function yt(d){var r=vt();return function(){var c=M(d),f;if(r){var v=M(this).constructor;f=Reflect.construct(c,arguments,v)}else f=c.apply(this,arguments);return mt(this,f)}}function mt(d,r){return r&&(R(r)==="object"||typeof r=="function")?r:gt(d)}function gt(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function vt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function M(d){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},M(d)}function V(d,r){var n="data-clipboard-".concat(d);if(r.hasAttribute(n))return r.getAttribute(n)}var ht=function(d){dt(n,d);var r=yt(n);function n(c,f){var v;return st(this,n),v=r.call(this),v.resolveOptions(f),v.listenClick(c),v}return ft(n,[{key:"resolveOptions",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof f.action=="function"?f.action:this.defaultAction,this.target=typeof f.target=="function"?f.target:this.defaultTarget,this.text=typeof f.text=="function"?f.text:this.defaultText,this.container=R(f.container)==="object"?f.container:document.body}},{key:"listenClick",value:function(f){var v=this;this.listener=w()(f,"click",function(_){return v.onClick(_)})}},{key:"onClick",value:function(f){var v=f.delegateTarget||f.currentTarget,_=this.action(v)||"copy",z=ut({action:_,container:this.container,target:this.target(v),text:this.text(v)});this.emit(z?"success":"error",{action:_,text:z,trigger:v,clearSelection:function(){v&&v.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(f){return V("action",f)}},{key:"defaultTarget",value:function(f){var v=V("target",f);if(v)return document.querySelector(v)}},{key:"defaultText",value:function(f){return V("text",f)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return T(f,v)}},{key:"cut",value:function(f){return o(f)}},{key:"isSupported",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],v=typeof f=="string"?[f]:f,_=!!document.queryCommandSupported;return v.forEach(function(z){_=_&&!!document.queryCommandSupported(z)}),_}}]),n}(u()),pt=ht},828:function(i){var a=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function l(u,y){for(;u&&u.nodeType!==a;){if(typeof u.matches=="function"&&u.matches(y))return u;u=u.parentNode}}i.exports=l},438:function(i,a,t){var l=t(828);function u(b,x,p,C,o){var s=w.apply(this,arguments);return b.addEventListener(p,s,o),{destroy:function(){b.removeEventListener(p,s,o)}}}function y(b,x,p,C,o){return typeof b.addEventListener=="function"?u.apply(null,arguments):typeof p=="function"?u.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(s){return u(s,x,p,C,o)}))}function w(b,x,p,C){return function(o){o.delegateTarget=l(o.target,x),o.delegateTarget&&C.call(b,o)}}i.exports=y},879:function(i,a){a.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},a.nodeList=function(t){var l=Object.prototype.toString.call(t);return t!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in t&&(t.length===0||a.node(t[0]))},a.string=function(t){return typeof t=="string"||t instanceof String},a.fn=function(t){var l=Object.prototype.toString.call(t);return l==="[object Function]"}},370:function(i,a,t){var l=t(879),u=t(438);function y(p,C,o){if(!p&&!C&&!o)throw new Error("Missing required arguments");if(!l.string(C))throw new TypeError("Second argument must be a String");if(!l.fn(o))throw new TypeError("Third argument must be a Function");if(l.node(p))return w(p,C,o);if(l.nodeList(p))return b(p,C,o);if(l.string(p))return x(p,C,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function w(p,C,o){return p.addEventListener(C,o),{destroy:function(){p.removeEventListener(C,o)}}}function b(p,C,o){return Array.prototype.forEach.call(p,function(s){s.addEventListener(C,o)}),{destroy:function(){Array.prototype.forEach.call(p,function(s){s.removeEventListener(C,o)})}}}function x(p,C,o){return u(document.body,p,C,o)}i.exports=y},817:function(i){function a(t){var l;if(t.nodeName==="SELECT")t.focus(),l=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var u=t.hasAttribute("readonly");u||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),u||t.removeAttribute("readonly"),l=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var y=window.getSelection(),w=document.createRange();w.selectNodeContents(t),y.removeAllRanges(),y.addRange(w),l=y.toString()}return l}i.exports=a},279:function(i){function a(){}a.prototype={on:function(t,l,u){var y=this.e||(this.e={});return(y[t]||(y[t]=[])).push({fn:l,ctx:u}),this},once:function(t,l,u){var y=this;function w(){y.off(t,w),l.apply(u,arguments)}return w._=l,this.on(t,w,u)},emit:function(t){var l=[].slice.call(arguments,1),u=((this.e||(this.e={}))[t]||[]).slice(),y=0,w=u.length;for(y;y<w;y++)u[y].fn.apply(u[y].ctx,l);return this},off:function(t,l){var u=this.e||(this.e={}),y=u[t],w=[];if(y&&l)for(var b=0,x=y.length;b<x;b++)y[b].fn!==l&&y[b].fn._!==l&&w.push(y[b]);return w.length?u[t]=w:delete u[t],this}},i.exports=a,i.exports.TinyEmitter=a}},h={};function m(i){if(h[i])return h[i].exports;var a=h[i]={exports:{}};return g[i](a,a.exports,m),a.exports}return function(){m.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return m.d(a,{a}),a}}(),function(){m.d=function(i,a){for(var t in a)m.o(a,t)&&!m.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:a[t]})}}(),function(){m.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)}}(),m(686)}().default})})(lt);var de=lt.exports;const ye=fe(de),me=e=>({toClipboard(S,g){return new Promise((h,m)=>{const i=document.createElement("button"),a=new ye(i,{text:()=>S,action:()=>"copy",container:g!==void 0?g:document.body});a.on("success",t=>{a.destroy(),h(t)}),a.on("error",t=>{a.destroy(),m(t)}),document.body.appendChild(i),i.click(),document.body.removeChild(i)})}}),_e=()=>({clickCopy:async S=>{const{toClipboard:g}=me();try{await g(S),J.success("复制成功")}catch(h){J.fail("您的浏览器不支持复制：",h)}}}),ke=()=>({appWakeUp:(S,g="")=>{let h=null;const m=i=>{h=setTimeout(async()=>{try{await ue({title:"如果App没有打开，请点击下载前往安装",confirmButtonText:"下载"}),g===""||(window.location.href=g)}catch{J.fail("取消成功")}finally{h&&(clearTimeout(h),h=null)}},i)};window.location.href=S,m(2e3)}}),Ae=()=>({isWeixin:navigator.userAgent.toLowerCase().includes("micromessenger")});export{Te as D,xe as I,_e as a,ke as b,Ae as u};
