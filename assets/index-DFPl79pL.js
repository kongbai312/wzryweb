import{m as H}from"./vantTool-iWRibSrj.js";import{m as pt,u as yt}from"./function-call-BF_XnuIN.js";import{d as z,x as j,q as K,r as q,a4 as mt,b as T,A as Y,p as L,ac as vt,k as $,J as gt,aj as ht,v as Q,s as bt,a9 as wt,y as Ct,af as Bt,Y as St,ak as G,al as Tt,V as xt}from"./index-mUJzLBod.js";import{P as Et,p as _t,a as At}from"./index-BItfs3mF.js";import{B as U}from"./index-BhqpO9u8.js";import{u as kt}from"./use-placeholder-DaBMcbUy.js";import{u as Ot}from"./use-expose-BV3qCCX3.js";import{u as Pt,a as Dt}from"./use-route-BgGpYDbH.js";import{b as Lt,c as Rt}from"./index-B9T57ikj.js";import{c as Nt}from"./interceptor-CczNA4uj.js";const[Z,J]=K("action-bar"),tt=Symbol(Z),Mt={placeholder:Boolean,safeAreaInsetBottom:j};var jt=z({name:Z,props:Mt,setup(n,{slots:B}){const y=q(),h=kt(y,J),{linkChildren:g}=mt(tt);g();const a=()=>{var r;return T("div",{ref:y,class:[J(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(r=B.default)==null?void 0:r.call(B)])};return()=>n.placeholder?h(a):a()}});const Ft=Y(jt),[It,Ht]=K("action-bar-button"),Ut=L({},Dt,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Wt=z({name:It,props:Ut,setup(n,{slots:B}){const y=Pt(),{parent:h,index:g}=vt(tt),a=$(()=>{if(h){const t=h.children[g.value-1];return!(t&&"isButton"in t)}}),r=$(()=>{if(h){const t=h.children[g.value+1];return!(t&&"isButton"in t)}});return Ot({isButton:!0}),()=>{const{type:t,icon:l,text:s,color:p,loading:w,disabled:b}=n;return T(U,{class:Ht([t,{last:r.value,first:a.value}]),size:"large",type:t,icon:l,color:p,loading:w,disabled:b,onClick:y},{default:()=>[B.default?B.default():s]})}}});const X=Y(Wt),[zt,A,M]=K("dialog"),Kt=L({},_t,{title:String,theme:String,width:St,message:[String,Function],callback:Function,allowHtml:Boolean,className:Bt,transition:Ct("van-dialog-bounce"),messageAlign:String,closeOnPopstate:j,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:j,closeOnClickOverlay:Boolean,keyboardEnabled:j,destroyOnClose:Boolean}),Yt=[...At,"transition","closeOnPopstate","destroyOnClose"];var et=z({name:zt,props:Kt,emits:["confirm","cancel","keydown","update:show"],setup(n,{emit:B,slots:y}){const h=q(),g=gt({confirm:!1,cancel:!1}),a=f=>B("update:show",f),r=f=>{var S;a(!1),(S=n.callback)==null||S.call(n,f)},t=f=>()=>{n.show&&(B(f),n.beforeClose?(g[f]=!0,Nt(n.beforeClose,{args:[f],done(){r(f),g[f]=!1},canceled(){g[f]=!1}})):r(f))},l=t("cancel"),s=t("confirm"),p=ht(f=>{var S,k;if(!n.keyboardEnabled||f.target!==((k=(S=h.value)==null?void 0:S.popupRef)==null?void 0:k.value))return;({Enter:n.showConfirmButton?s:G,Escape:n.showCancelButton?l:G})[f.key](),B("keydown",f)},["enter","esc"]),w=()=>{const f=y.title?y.title():n.title;if(f)return T("div",{class:A("header",{isolated:!n.message&&!y.default})},[f])},b=f=>{const{message:S,allowHtml:k,messageAlign:E}=n,O=A("message",{"has-title":f,[E]:E}),P=Tt(S)?S():S;return k&&typeof P=="string"?T("div",{class:O,innerHTML:P},null):T("div",{class:O},[P])},x=()=>{if(y.default)return T("div",{class:A("content")},[y.default()]);const{title:f,message:S,allowHtml:k}=n;if(S){const E=!!(f||y.title);return T("div",{key:k?1:0,class:A("content",{isolated:!E})},[b(E)])}},m=()=>T("div",{class:[Rt,A("footer")]},[n.showCancelButton&&T(U,{size:"large",text:n.cancelButtonText||M("cancel"),class:A("cancel"),style:{color:n.cancelButtonColor},loading:g.cancel,disabled:n.cancelButtonDisabled,onClick:l},null),n.showConfirmButton&&T(U,{size:"large",text:n.confirmButtonText||M("confirm"),class:[A("confirm"),{[Lt]:n.showCancelButton}],style:{color:n.confirmButtonColor},loading:g.confirm,disabled:n.confirmButtonDisabled,onClick:s},null)]),C=()=>T(Ft,{class:A("footer")},{default:()=>[n.showCancelButton&&T(X,{type:"warning",text:n.cancelButtonText||M("cancel"),class:A("cancel"),color:n.cancelButtonColor,loading:g.cancel,disabled:n.cancelButtonDisabled,onClick:l},null),n.showConfirmButton&&T(X,{type:"danger",text:n.confirmButtonText||M("confirm"),class:A("confirm"),color:n.confirmButtonColor,loading:g.confirm,disabled:n.confirmButtonDisabled,onClick:s},null)]}),v=()=>y.footer?y.footer():n.theme==="round-button"?C():m();return()=>{const{width:f,title:S,theme:k,message:E,className:O}=n;return T(Et,Q({ref:h,role:"dialog",class:[A([k]),O],style:{width:wt(f)},tabindex:0,"aria-labelledby":S||E,onKeydown:p,"onUpdate:show":a},bt(n,Yt)),{default:()=>[w(),x(),v()]})}}});let W;const Vt={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let $t=L({},Vt);function Gt(){({instance:W}=pt({setup(){const{state:B,toggle:y}=yt();return()=>T(et,Q(B,{"onUpdate:show":y}),null)}}))}function Jt(n){return xt?new Promise((B,y)=>{W||Gt(),W.open(L({},$t,n,{callback:h=>{(h==="confirm"?B:y)(h)}}))}):Promise.resolve(void 0)}const Xt=n=>Jt(L({showCancelButton:!0},n)),pe=Y(et);var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nt={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(n,B){(function(h,g){n.exports=g()})(qt,function(){return function(){var y={686:function(a,r,t){t.d(r,{default:function(){return dt}});var l=t(279),s=t.n(l),p=t(370),w=t.n(p),b=t(817),x=t.n(b);function m(u){try{return document.execCommand(u)}catch{return!1}}var C=function(o){var e=x()(o);return m("cut"),e},v=C;function f(u){var o=document.documentElement.getAttribute("dir")==="rtl",e=document.createElement("textarea");e.style.fontSize="12pt",e.style.border="0",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style[o?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;return e.style.top="".concat(i,"px"),e.setAttribute("readonly",""),e.value=u,e}var S=function(o,e){var i=f(o);e.container.appendChild(i);var c=x()(i);return m("copy"),i.remove(),c},k=function(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},i="";return typeof o=="string"?i=S(o,e):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o==null?void 0:o.type)?i=S(o.value,e):(i=x()(o),m("copy")),i},E=k;function O(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(e){return typeof e}:O=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(u)}var P=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=o.action,i=e===void 0?"copy":e,c=o.container,d=o.target,_=o.text;if(i!=="copy"&&i!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(d!==void 0)if(d&&O(d)==="object"&&d.nodeType===1){if(i==="copy"&&d.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(i==="cut"&&(d.hasAttribute("readonly")||d.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(_)return E(_,{container:c});if(d)return i==="cut"?v(d):E(d,{container:c})},ot=P;function D(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(e){return typeof e}:D=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(u)}function rt(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function V(u,o){for(var e=0;e<o.length;e++){var i=o[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function at(u,o,e){return o&&V(u.prototype,o),e&&V(u,e),u}function it(u,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(o&&o.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),o&&F(u,o)}function F(u,o){return F=Object.setPrototypeOf||function(i,c){return i.__proto__=c,i},F(u,o)}function ct(u){var o=st();return function(){var i=R(u),c;if(o){var d=R(this).constructor;c=Reflect.construct(i,arguments,d)}else c=i.apply(this,arguments);return ut(this,c)}}function ut(u,o){return o&&(D(o)==="object"||typeof o=="function")?o:lt(u)}function lt(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function st(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function R(u){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(u)}function I(u,o){var e="data-clipboard-".concat(u);if(o.hasAttribute(e))return o.getAttribute(e)}var ft=function(u){it(e,u);var o=ct(e);function e(i,c){var d;return rt(this,e),d=o.call(this),d.resolveOptions(c),d.listenClick(i),d}return at(e,[{key:"resolveOptions",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof c.action=="function"?c.action:this.defaultAction,this.target=typeof c.target=="function"?c.target:this.defaultTarget,this.text=typeof c.text=="function"?c.text:this.defaultText,this.container=D(c.container)==="object"?c.container:document.body}},{key:"listenClick",value:function(c){var d=this;this.listener=w()(c,"click",function(_){return d.onClick(_)})}},{key:"onClick",value:function(c){var d=c.delegateTarget||c.currentTarget,_=this.action(d)||"copy",N=ot({action:_,container:this.container,target:this.target(d),text:this.text(d)});this.emit(N?"success":"error",{action:_,text:N,trigger:d,clearSelection:function(){d&&d.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(c){return I("action",c)}},{key:"defaultTarget",value:function(c){var d=I("target",c);if(d)return document.querySelector(d)}},{key:"defaultText",value:function(c){return I("text",c)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return E(c,d)}},{key:"cut",value:function(c){return v(c)}},{key:"isSupported",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],d=typeof c=="string"?[c]:c,_=!!document.queryCommandSupported;return d.forEach(function(N){_=_&&!!document.queryCommandSupported(N)}),_}}]),e}(s()),dt=ft},828:function(a){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function l(s,p){for(;s&&s.nodeType!==r;){if(typeof s.matches=="function"&&s.matches(p))return s;s=s.parentNode}}a.exports=l},438:function(a,r,t){var l=t(828);function s(b,x,m,C,v){var f=w.apply(this,arguments);return b.addEventListener(m,f,v),{destroy:function(){b.removeEventListener(m,f,v)}}}function p(b,x,m,C,v){return typeof b.addEventListener=="function"?s.apply(null,arguments):typeof m=="function"?s.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(f){return s(f,x,m,C,v)}))}function w(b,x,m,C){return function(v){v.delegateTarget=l(v.target,x),v.delegateTarget&&C.call(b,v)}}a.exports=p},879:function(a,r){r.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},r.nodeList=function(t){var l=Object.prototype.toString.call(t);return t!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in t&&(t.length===0||r.node(t[0]))},r.string=function(t){return typeof t=="string"||t instanceof String},r.fn=function(t){var l=Object.prototype.toString.call(t);return l==="[object Function]"}},370:function(a,r,t){var l=t(879),s=t(438);function p(m,C,v){if(!m&&!C&&!v)throw new Error("Missing required arguments");if(!l.string(C))throw new TypeError("Second argument must be a String");if(!l.fn(v))throw new TypeError("Third argument must be a Function");if(l.node(m))return w(m,C,v);if(l.nodeList(m))return b(m,C,v);if(l.string(m))return x(m,C,v);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function w(m,C,v){return m.addEventListener(C,v),{destroy:function(){m.removeEventListener(C,v)}}}function b(m,C,v){return Array.prototype.forEach.call(m,function(f){f.addEventListener(C,v)}),{destroy:function(){Array.prototype.forEach.call(m,function(f){f.removeEventListener(C,v)})}}}function x(m,C,v){return s(document.body,m,C,v)}a.exports=p},817:function(a){function r(t){var l;if(t.nodeName==="SELECT")t.focus(),l=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var s=t.hasAttribute("readonly");s||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),s||t.removeAttribute("readonly"),l=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var p=window.getSelection(),w=document.createRange();w.selectNodeContents(t),p.removeAllRanges(),p.addRange(w),l=p.toString()}return l}a.exports=r},279:function(a){function r(){}r.prototype={on:function(t,l,s){var p=this.e||(this.e={});return(p[t]||(p[t]=[])).push({fn:l,ctx:s}),this},once:function(t,l,s){var p=this;function w(){p.off(t,w),l.apply(s,arguments)}return w._=l,this.on(t,w,s)},emit:function(t){var l=[].slice.call(arguments,1),s=((this.e||(this.e={}))[t]||[]).slice(),p=0,w=s.length;for(p;p<w;p++)s[p].fn.apply(s[p].ctx,l);return this},off:function(t,l){var s=this.e||(this.e={}),p=s[t],w=[];if(p&&l)for(var b=0,x=p.length;b<x;b++)p[b].fn!==l&&p[b].fn._!==l&&w.push(p[b]);return w.length?s[t]=w:delete s[t],this}},a.exports=r,a.exports.TinyEmitter=r}},h={};function g(a){if(h[a])return h[a].exports;var r=h[a]={exports:{}};return y[a](r,r.exports,g),r.exports}return function(){g.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return g.d(r,{a:r}),r}}(),function(){g.d=function(a,r){for(var t in r)g.o(r,t)&&!g.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:r[t]})}}(),function(){g.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)}}(),g(686)}().default})})(nt);var Zt=nt.exports;const te=Qt(Zt),ee=n=>({toClipboard(B,y){return new Promise((h,g)=>{const a=document.createElement("button"),r=new te(a,{text:()=>B,action:()=>"copy",container:y!==void 0?y:document.body});r.on("success",t=>{r.destroy(),h(t)}),r.on("error",t=>{r.destroy(),g(t)}),document.body.appendChild(a),a.click(),document.body.removeChild(a)})}}),ye=()=>({clickCopy:async B=>{const{toClipboard:y}=ee();try{await y(B),H.success("复制成功")}catch(h){H.fail("您的浏览器不支持复制：",h)}}}),me=()=>({appWakeUp:(B,y="")=>{let h=null;const g=a=>{h=setTimeout(async()=>{try{await Xt({title:"如果App没有打开，请点击下载前往安装",confirmButtonText:"下载"}),y===""||(window.location.href=y)}catch{H.fail("取消成功")}finally{h&&(clearTimeout(h),h=null)}},a)};window.location.href=B,g(2e3)}}),ve=()=>({isWeixin:navigator.userAgent.toLowerCase().includes("micromessenger")});export{pe as D,ye as a,me as b,ve as u};
