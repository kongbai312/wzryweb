import{I as bt}from"./index-DJ78MK5i.js";import{c as U,d as W,r as R,u as wt,t as N,a as S,w as K,e as M,f as Ct,h as V,b as Bt,I as F,O as St,l as Et,ad as rt,af as Tt,M as xt,L as tt,n as I,E as X,_ as _t,Z as At,i as H,G as Pt,H as kt,av as Ot,T as Lt,aw as et,D as Dt}from"./index-DWTpD4jv.js";import{u as It,B as Z,a as Rt,p as Nt,P as Mt,c as jt,d as zt,m as J}from"./vantTool-nFLXD37Z.js";import{u as $t}from"./use-placeholder-CUcY6CZE.js";import{r as Ft,u as Ht,d as Ut,e as Wt,c as Kt}from"./use-route-qcc9JVac.js";const[at,nt]=U("action-bar"),it=Symbol(at),Yt={placeholder:Boolean,safeAreaInsetBottom:N};var Gt=W({name:at,props:Yt,setup(e,{slots:w}){const h=R(),v=$t(h,nt),{linkChildren:m}=wt(it);m();const i=()=>{var a;return S("div",{ref:h,class:[nt(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(a=w.default)==null?void 0:a.call(w)])};return()=>e.placeholder?v(i):i()}});const Vt=K(Gt),[Xt,Zt]=U("action-bar-button"),Jt=M({},Ft,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Qt=W({name:Xt,props:Jt,setup(e,{slots:w}){const h=Ht(),{parent:v,index:m}=Ct(it),i=V(()=>{if(v){const t=v.children[m.value-1];return!(t&&"isButton"in t)}}),a=V(()=>{if(v){const t=v.children[m.value+1];return!(t&&"isButton"in t)}});return It({isButton:!0}),()=>{const{type:t,icon:c,text:u,color:y,loading:C,disabled:b}=e;return S(Z,{class:Zt([t,{last:a.value,first:i.value}]),size:"large",type:t,icon:c,color:y,loading:C,disabled:b,onClick:h},{default:()=>[w.default?w.default():u]})}}});const ot=K(Qt),[qt,O]=U("image"),te={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:I,height:I,radius:I,lazyLoad:Boolean,iconSize:I,showError:N,errorIcon:X("photo-fail"),iconPrefix:String,showLoading:N,loadingIcon:X("photo"),crossorigin:String,referrerpolicy:String};var ee=W({name:qt,props:te,emits:["load","error"],setup(e,{emit:w,slots:h}){const v=R(!1),m=R(!0),i=R(),{$Lazyload:a}=Bt().proxy,t=V(()=>{const o={width:F(e.width),height:F(e.height)};return St(e.radius)&&(o.overflow="hidden",o.borderRadius=F(e.radius)),o});Et(()=>e.src,()=>{v.value=!1,m.value=!0});const c=o=>{m.value&&(m.value=!1,w("load",o))},u=()=>{const o=new Event("load");Object.defineProperty(o,"target",{value:i.value,enumerable:!0}),c(o)},y=o=>{v.value=!0,m.value=!1,w("error",o)},C=(o,s,E)=>E?E():S(bt,{name:o,size:e.iconSize,class:s,classPrefix:e.iconPrefix},null),b=()=>{if(m.value&&e.showLoading)return S("div",{class:O("loading")},[C(e.loadingIcon,O("loading-icon"),h.loading)]);if(v.value&&e.showError)return S("div",{class:O("error")},[C(e.errorIcon,O("error-icon"),h.error)])},T=()=>{if(v.value||!e.src)return;const o={alt:e.alt,class:O("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?_t(S("img",H({ref:i},o),null),[[At("lazy"),e.src]]):S("img",H({ref:i,src:e.src,onLoad:c,onError:y},o),null)},p=({el:o})=>{const s=()=>{o===i.value&&m.value&&u()};i.value?s():tt(s)},B=({el:o})=>{o===i.value&&!v.value&&y()};return a&&rt&&(a.$on("loaded",p),a.$on("error",B),Tt(()=>{a.$off("loaded",p),a.$off("error",B)})),xt(()=>{tt(()=>{var o;(o=i.value)!=null&&o.complete&&!e.lazyLoad&&u()})}),()=>{var o;return S("div",{class:O({round:e.round,block:e.block}),style:t.value},[T(),b(),(o=h.default)==null?void 0:o.call(h)])}}});const Ce=K(ee),[ne,A,$]=U("dialog"),oe=M({},Rt,{title:String,theme:String,width:I,message:[String,Function],callback:Function,allowHtml:Boolean,className:Pt,transition:X("van-dialog-bounce"),messageAlign:String,closeOnPopstate:N,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:N,closeOnClickOverlay:Boolean}),re=[...Nt,"transition","closeOnPopstate"];var ct=W({name:ne,props:oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:w,slots:h}){const v=R(),m=kt({confirm:!1,cancel:!1}),i=s=>w("update:show",s),a=s=>{var E;i(!1),(E=e.callback)==null||E.call(e,s)},t=s=>()=>{e.show&&(w(s),e.beforeClose?(m[s]=!0,Kt(e.beforeClose,{args:[s],done(){a(s),m[s]=!1},canceled(){m[s]=!1}})):a(s))},c=t("cancel"),u=t("confirm"),y=Ot(s=>{var E,P;if(s.target!==((P=(E=v.value)==null?void 0:E.popupRef)==null?void 0:P.value))return;({Enter:e.showConfirmButton?u:et,Escape:e.showCancelButton?c:et})[s.key](),w("keydown",s)},["enter","esc"]),C=()=>{const s=h.title?h.title():e.title;if(s)return S("div",{class:A("header",{isolated:!e.message&&!h.default})},[s])},b=s=>{const{message:E,allowHtml:P,messageAlign:x}=e,k=A("message",{"has-title":s,[x]:x}),L=Dt(E)?E():E;return P&&typeof L=="string"?S("div",{class:k,innerHTML:L},null):S("div",{class:k},[L])},T=()=>{if(h.default)return S("div",{class:A("content")},[h.default()]);const{title:s,message:E,allowHtml:P}=e;if(E){const x=!!(s||h.title);return S("div",{key:P?1:0,class:A("content",{isolated:!x})},[b(x)])}},p=()=>S("div",{class:[Wt,A("footer")]},[e.showCancelButton&&S(Z,{size:"large",text:e.cancelButtonText||$("cancel"),class:A("cancel"),style:{color:e.cancelButtonColor},loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:c},null),e.showConfirmButton&&S(Z,{size:"large",text:e.confirmButtonText||$("confirm"),class:[A("confirm"),{[Ut]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),B=()=>S(Vt,{class:A("footer")},{default:()=>[e.showCancelButton&&S(ot,{type:"warning",text:e.cancelButtonText||$("cancel"),class:A("cancel"),color:e.cancelButtonColor,loading:m.cancel,disabled:e.cancelButtonDisabled,onClick:c},null),e.showConfirmButton&&S(ot,{type:"danger",text:e.confirmButtonText||$("confirm"),class:A("confirm"),color:e.confirmButtonColor,loading:m.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),o=()=>h.footer?h.footer():e.theme==="round-button"?B():p();return()=>{const{width:s,title:E,theme:P,message:x,className:k}=e;return S(Mt,H({ref:v,role:"dialog",class:[A([P]),k],style:{width:F(s)},tabindex:0,"aria-labelledby":E||x,onKeydown:y,"onUpdate:show":i},Lt(e,re)),{default:()=>[C(),T(),o()]})}}});let Q;const ae={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ie=M({},ae);function ce(){({instance:Q}=jt({setup(){const{state:w,toggle:h}=zt();return()=>S(ct,H(w,{"onUpdate:show":h}),null)}}))}function le(e){return rt?new Promise((w,h)=>{Q||ce(),Q.open(M({},ie,e,{callback:v=>{(v==="confirm"?w:h)(v)}}))}):Promise.resolve(void 0)}const ue=e=>le(M({showCancelButton:!0},e)),Be=K(ct);var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lt={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(e,w){(function(v,m){e.exports=m()})(se,function(){return function(){var h={686:function(i,a,t){t.d(a,{default:function(){return pt}});var c=t(279),u=t.n(c),y=t(370),C=t.n(y),b=t(817),T=t.n(b);function p(d){try{return document.execCommand(d)}catch{return!1}}var B=function(r){var n=T()(r);return p("cut"),n},o=B;function s(d){var r=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[r?"right":"left"]="-9999px";var l=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(l,"px"),n.setAttribute("readonly",""),n.value=d,n}var E=function(r,n){var l=s(r);n.container.appendChild(l);var f=T()(l);return p("copy"),l.remove(),f},P=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},l="";return typeof r=="string"?l=E(r,n):r instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(r==null?void 0:r.type)?l=E(r.value,n):(l=T()(r),p("copy")),l},x=P;function k(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(n){return typeof n}:k=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},k(d)}var L=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.action,l=n===void 0?"copy":n,f=r.container,g=r.target,_=r.text;if(l!=="copy"&&l!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(g!==void 0)if(g&&k(g)==="object"&&g.nodeType===1){if(l==="copy"&&g.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(l==="cut"&&(g.hasAttribute("readonly")||g.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(_)return x(_,{container:f});if(g)return l==="cut"?o(g):x(g,{container:f})},ut=L;function D(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(n){return typeof n}:D=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},D(d)}function st(d,r){if(!(d instanceof r))throw new TypeError("Cannot call a class as a function")}function q(d,r){for(var n=0;n<r.length;n++){var l=r[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(d,l.key,l)}}function ft(d,r,n){return r&&q(d.prototype,r),n&&q(d,n),d}function dt(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(r&&r.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),r&&Y(d,r)}function Y(d,r){return Y=Object.setPrototypeOf||function(l,f){return l.__proto__=f,l},Y(d,r)}function yt(d){var r=gt();return function(){var l=j(d),f;if(r){var g=j(this).constructor;f=Reflect.construct(l,arguments,g)}else f=l.apply(this,arguments);return mt(this,f)}}function mt(d,r){return r&&(D(r)==="object"||typeof r=="function")?r:vt(d)}function vt(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function gt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function j(d){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},j(d)}function G(d,r){var n="data-clipboard-".concat(d);if(r.hasAttribute(n))return r.getAttribute(n)}var ht=function(d){dt(n,d);var r=yt(n);function n(l,f){var g;return st(this,n),g=r.call(this),g.resolveOptions(f),g.listenClick(l),g}return ft(n,[{key:"resolveOptions",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof f.action=="function"?f.action:this.defaultAction,this.target=typeof f.target=="function"?f.target:this.defaultTarget,this.text=typeof f.text=="function"?f.text:this.defaultText,this.container=D(f.container)==="object"?f.container:document.body}},{key:"listenClick",value:function(f){var g=this;this.listener=C()(f,"click",function(_){return g.onClick(_)})}},{key:"onClick",value:function(f){var g=f.delegateTarget||f.currentTarget,_=this.action(g)||"copy",z=ut({action:_,container:this.container,target:this.target(g),text:this.text(g)});this.emit(z?"success":"error",{action:_,text:z,trigger:g,clearSelection:function(){g&&g.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(f){return G("action",f)}},{key:"defaultTarget",value:function(f){var g=G("target",f);if(g)return document.querySelector(g)}},{key:"defaultText",value:function(f){return G("text",f)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return x(f,g)}},{key:"cut",value:function(f){return o(f)}},{key:"isSupported",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],g=typeof f=="string"?[f]:f,_=!!document.queryCommandSupported;return g.forEach(function(z){_=_&&!!document.queryCommandSupported(z)}),_}}]),n}(u()),pt=ht},828:function(i){var a=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function c(u,y){for(;u&&u.nodeType!==a;){if(typeof u.matches=="function"&&u.matches(y))return u;u=u.parentNode}}i.exports=c},438:function(i,a,t){var c=t(828);function u(b,T,p,B,o){var s=C.apply(this,arguments);return b.addEventListener(p,s,o),{destroy:function(){b.removeEventListener(p,s,o)}}}function y(b,T,p,B,o){return typeof b.addEventListener=="function"?u.apply(null,arguments):typeof p=="function"?u.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(s){return u(s,T,p,B,o)}))}function C(b,T,p,B){return function(o){o.delegateTarget=c(o.target,T),o.delegateTarget&&B.call(b,o)}}i.exports=y},879:function(i,a){a.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},a.nodeList=function(t){var c=Object.prototype.toString.call(t);return t!==void 0&&(c==="[object NodeList]"||c==="[object HTMLCollection]")&&"length"in t&&(t.length===0||a.node(t[0]))},a.string=function(t){return typeof t=="string"||t instanceof String},a.fn=function(t){var c=Object.prototype.toString.call(t);return c==="[object Function]"}},370:function(i,a,t){var c=t(879),u=t(438);function y(p,B,o){if(!p&&!B&&!o)throw new Error("Missing required arguments");if(!c.string(B))throw new TypeError("Second argument must be a String");if(!c.fn(o))throw new TypeError("Third argument must be a Function");if(c.node(p))return C(p,B,o);if(c.nodeList(p))return b(p,B,o);if(c.string(p))return T(p,B,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function C(p,B,o){return p.addEventListener(B,o),{destroy:function(){p.removeEventListener(B,o)}}}function b(p,B,o){return Array.prototype.forEach.call(p,function(s){s.addEventListener(B,o)}),{destroy:function(){Array.prototype.forEach.call(p,function(s){s.removeEventListener(B,o)})}}}function T(p,B,o){return u(document.body,p,B,o)}i.exports=y},817:function(i){function a(t){var c;if(t.nodeName==="SELECT")t.focus(),c=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var u=t.hasAttribute("readonly");u||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),u||t.removeAttribute("readonly"),c=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var y=window.getSelection(),C=document.createRange();C.selectNodeContents(t),y.removeAllRanges(),y.addRange(C),c=y.toString()}return c}i.exports=a},279:function(i){function a(){}a.prototype={on:function(t,c,u){var y=this.e||(this.e={});return(y[t]||(y[t]=[])).push({fn:c,ctx:u}),this},once:function(t,c,u){var y=this;function C(){y.off(t,C),c.apply(u,arguments)}return C._=c,this.on(t,C,u)},emit:function(t){var c=[].slice.call(arguments,1),u=((this.e||(this.e={}))[t]||[]).slice(),y=0,C=u.length;for(y;y<C;y++)u[y].fn.apply(u[y].ctx,c);return this},off:function(t,c){var u=this.e||(this.e={}),y=u[t],C=[];if(y&&c)for(var b=0,T=y.length;b<T;b++)y[b].fn!==c&&y[b].fn._!==c&&C.push(y[b]);return C.length?u[t]=C:delete u[t],this}},i.exports=a,i.exports.TinyEmitter=a}},v={};function m(i){if(v[i])return v[i].exports;var a=v[i]={exports:{}};return h[i](a,a.exports,m),a.exports}return function(){m.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return m.d(a,{a}),a}}(),function(){m.d=function(i,a){for(var t in a)m.o(a,t)&&!m.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:a[t]})}}(),function(){m.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)}}(),m(686)}().default})})(lt);var de=lt.exports;const ye=fe(de),me=e=>{const w=(e==null?void 0:e.appendToBody)===void 0?!0:e.appendToBody;return{toClipboard(h,v){return new Promise((m,i)=>{const a=document.createElement("button"),t=new ye(a,{text:()=>h,action:()=>"copy",container:v!==void 0?v:document.body});t.on("success",c=>{t.destroy(),m(c)}),t.on("error",c=>{t.destroy(),i(c)}),w&&document.body.appendChild(a),a.click(),w&&document.body.removeChild(a)})}}},Se=()=>({clickCopy:async w=>{const{toClipboard:h}=me();try{await h(w),J.success("复制成功")}catch(v){J.fail("您的浏览器不支持复制：",v)}}}),Ee=()=>({appWakeUp:(w,h="")=>{let v=null;const m=i=>{v=setTimeout(async()=>{try{await ue({title:"如果App没有打开，请点击下载前往安装",confirmButtonText:"下载"}),h===""||(window.location.href=h)}catch{J.fail("取消成功")}finally{v&&(clearTimeout(v),v=null)}},i)};window.location.href=w,m(2e3)}}),Te=()=>({isWeixin:navigator.userAgent.toLowerCase().includes("micromessenger")});export{Be as D,Ce as I,Se as a,Ee as b,Te as u};
