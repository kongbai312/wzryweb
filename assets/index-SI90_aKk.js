import{A as Y,d as A,Y as $,x as R,q as se,k as I,b as l,a9 as ae,I as L,r as h,aj as be,w as D,aq as _e,D as Q,M as Z,v as ie,ar as re,P as K,a1 as he,as as ke,z as J,at as xe,J as Se,N as Ce,au as we,L as Me,a7 as ye,an as Te,g as j,F as X,l as z,H as Ve,a as b,e as C,i as G,u as V,m as de,t as ne,o as P,c as oe}from"./index-BeP3gcyx.js";import{a as Ie,T as Pe}from"./index-CMVjF6Sj.js";import{_ as Be}from"./narback.vue_vue_type_script_setup_true_lang-CYyTv9vJ.js";import{s as Ee,C as me}from"./index-Dxn0DWjd.js";import{m as W}from"./vantTool-B8lNe5bo.js";import{H as ce,L as qe}from"./use-route-IHgQ6GTt.js";import{c as fe}from"./interceptor-DVqSzefq.js";import{B as ve}from"./index-DpGV43Tb.js";import{_ as le}from"./_plugin-vue_export-helper-B23Ac8Lp.js";import{a as Ne,D as ze}from"./index-CcNdAxt0.js";import"./index-CQ6M4_C4.js";import{u as $e}from"./index-CamQlpZW.js";import{u as je}from"./use-expose-CQIS9pGU.js";import"./use-placeholder-DVl03NXw.js";import"./use-id-BK2jniW6.js";const ge=Y(Ee),[Fe,ee]=se("progress"),Re={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:R,pivotColor:String,trackColor:String,strokeWidth:$,percentage:{type:$,default:0,validator:t=>+t>=0&&+t<=100}};var Le=A({name:Fe,props:Re,setup(t){const o=I(()=>t.inactive?void 0:t.color),c=()=>{const{textColor:d,pivotText:m,pivotColor:f,percentage:n}=t,u=m??`${n}%`;if(t.showPivot&&u){const w={color:d,left:`${+n}%`,transform:`translate(-${+n}%,-50%)`,background:f||o.value};return l("span",{style:w,class:ee("pivot",{inactive:t.inactive})},[u])}};return()=>{const{trackColor:d,percentage:m,strokeWidth:f}=t,n={background:d,height:ae(f)},u={width:`${m}%`,background:o.value};return l("div",{class:ee(),style:n},[l("span",{class:ee("portion",{inactive:t.inactive}),style:u},null),c()])}}});const Ae=Y(Le),[De,O]=se("stepper"),We=200,U=(t,o)=>String(t)===String(o),Ge={min:L(1),max:L(1/0),name:L(""),step:L(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:R,showMinus:R,showInput:R,longPress:R,autoFixed:R,allowEmpty:Boolean,modelValue:$,inputWidth:$,buttonSize:$,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:L(1),decimalLength:$};var He=A({name:De,props:Ge,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:o}){const c=(e,s=!0)=>{const{min:p,max:F,allowEmpty:S,decimalLength:H}=t;return S&&e===""||(e=re(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+p:e,e=s?Math.max(Math.min(+F,e),+p):e,K(H)&&(e=e.toFixed(+H))),e},d=()=>{var e;const s=(e=t.modelValue)!=null?e:t.defaultValue,p=c(s);return U(p,t.modelValue)||o("update:modelValue",p),p};let m;const f=h(),n=h(d()),u=I(()=>t.disabled||t.disableMinus||+n.value<=+t.min),w=I(()=>t.disabled||t.disablePlus||+n.value>=+t.max),T=I(()=>({width:ae(t.inputWidth),height:ae(t.buttonSize)})),i=I(()=>be(t.buttonSize)),k=()=>{const e=c(n.value);U(e,n.value)||(n.value=e)},M=e=>{t.beforeChange?fe(t.beforeChange,{args:[e],done(){n.value=e}}):n.value=e},y=()=>{if(m==="plus"&&w.value||m==="minus"&&u.value){o("overlimit",m);return}const e=m==="minus"?-t.step:+t.step,s=c(xe(+n.value,e));M(s),o(m)},B=e=>{const s=e.target,{value:p}=s,{decimalLength:F}=t;let S=re(String(p),!t.integer);if(K(F)&&S.includes(".")){const ue=S.split(".");S=`${ue[0]}.${ue[1].slice(0,+F)}`}t.beforeChange?s.value=String(n.value):U(p,S)||(s.value=S);const H=S===String(+S);M(H?+S:S)},q=e=>{var s;t.disableInput?(s=f.value)==null||s.blur():o("focus",e)},v=e=>{const s=e.target,p=c(s.value,t.autoFixed);s.value=String(p),n.value=p,he(()=>{o("blur",e),ke()})};let a,r;const _=()=>{r=setTimeout(()=>{y(),_()},We)},x=()=>{t.longPress&&(a=!1,clearTimeout(r),r=setTimeout(()=>{a=!0,y(),_()},qe))},E=e=>{t.longPress&&(clearTimeout(r),a&&J(e))},N=e=>{t.disableInput&&J(e)},g=e=>({onClick:s=>{J(s),m=e,y()},onTouchstartPassive:()=>{m=e,x()},onTouchend:E,onTouchcancel:E});return D(()=>[t.max,t.min,t.integer,t.decimalLength],k),D(()=>t.modelValue,e=>{U(e,n.value)||(n.value=c(e))}),D(n,e=>{o("update:modelValue",e),o("change",e,{name:t.name})}),_e(()=>t.modelValue),()=>l("div",{role:"group",class:O([t.theme])},[Q(l("button",ie({type:"button",style:i.value,class:[O("minus",{disabled:u.value}),{[ce]:!u.value}],"aria-disabled":u.value||void 0},g("minus")),null),[[Z,t.showMinus]]),Q(l("input",{ref:f,type:t.integer?"tel":"text",role:"spinbutton",class:O("input"),value:n.value,style:T.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,autocomplete:"off","aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":n.value,onBlur:v,onInput:B,onFocus:q,onMousedown:N},null),[[Z,t.showInput]]),Q(l("button",ie({type:"button",style:i.value,class:[O("plus",{disabled:w.value}),{[ce]:!w.value}],"aria-disabled":w.value||void 0},g("plus")),null),[[Z,t.showPlus]])])}});const Oe=Y(He),[Ue,te]=se("swipe-cell"),Je={name:L(""),disabled:Boolean,leftWidth:$,rightWidth:$,beforeClose:Function,stopPropagation:Boolean};var Ke=A({name:Ue,props:Je,emits:["open","close","click"],setup(t,{emit:o,slots:c}){let d,m,f,n;const u=h(),w=h(),T=h(),i=Se({offset:0,dragging:!1}),k=$e(),M=e=>e.value?Ce(e).width:0,y=I(()=>K(t.leftWidth)?+t.leftWidth:M(w)),B=I(()=>K(t.rightWidth)?+t.rightWidth:M(T)),q=e=>{i.offset=e==="left"?y.value:-B.value,d||(d=!0,o("open",{name:t.name,position:e}))},v=e=>{i.offset=0,d&&(d=!1,o("close",{name:t.name,position:e}))},a=e=>{const s=Math.abs(i.offset),p=.15,F=d?1-p:p,S=e==="left"?y.value:B.value;S&&s>S*F?q(e):v(e)},r=e=>{t.disabled||(f=i.offset,k.start(e))},_=e=>{if(t.disabled)return;const{deltaX:s}=k;k.move(e),k.isHorizontal()&&(m=!0,i.dragging=!0,(!d||s.value*f<0)&&J(e,t.stopPropagation),i.offset=ye(s.value+f,-B.value,y.value))},x=()=>{i.dragging&&(i.dragging=!1,a(i.offset>0?"left":"right"),setTimeout(()=>{m=!1},0))},E=(e="outside",s)=>{n||(o("click",e),d&&!m&&(n=!0,fe(t.beforeClose,{args:[{event:s,name:t.name,position:e}],done:()=>{n=!1,v(e)},canceled:()=>n=!1,error:()=>n=!1})))},N=(e,s)=>p=>{s&&p.stopPropagation(),!m&&E(e,p)},g=(e,s)=>{const p=c[e];if(p)return l("div",{ref:s,class:te(e),onClick:N(e,!0)},[p()])};return je({open:q,close:v}),we(u,e=>E("outside",e),{eventName:"touchstart"}),Me("touchmove",_,{target:u}),()=>{var e;const s={transform:`translate3d(${i.offset}px, 0, 0)`,transitionDuration:i.dragging?"0s":".6s"};return l("div",{ref:u,class:te(),onClick:N("cell",m),onTouchstartPassive:r,onTouchend:x,onTouchcancel:x},[l("div",{class:te("wrapper"),style:s},[g("left",w),(e=c.default)==null?void 0:e.call(c),g("right",T)])])}}});const Xe=Y(Ke),pe=Te("xx-bsMaps",()=>({bsMaps:h({bs:{text:"宝石",value:"bs",map:["硬石矿井","十面埋伏","嗖嗖作响"]},jk:{text:"金库",value:"jk",map:["轰隆峡谷","安全区域","烫手山芋"]},sj:{text:"赏金",value:"sj",map:["蝮蛇草场","神秘流星","大运河"]},tt:{text:"淘汰",value:"tt",map:["摇滚贝尔","烈焰凤凰","空旷荒野"]},rq:{text:"热区",value:"rq",map:["开门营业","平行游戏","甲虫决斗"]},zq:{text:"足球",value:"zq",map:["后院球场","三重威胁","绿荫球场"]}})}),{persist:{key:"bs-maps",paths:["bsMaps"]}}),Ye={class:"mode"},Qe={class:"buttonGroup"},Ze={class:"randomButton_container"},et={class:"percentage_container"},tt={key:0,class:"mapShow"},at=A({__name:"bsMap",setup(t){const o=h([]),c=h(),d=()=>{c.value.toggleAll(!0)},m=()=>{c.value.toggleAll()};let f=h(0),n=h(1),u=h(!1);const w=async()=>{for(f.value=0,await new Promise(v=>setTimeout(v,500));f.value<100;){const v=Math.floor(Math.random()*10)+1;f.value+=v,f.value>=100&&(f.value=100),await new Promise(a=>setTimeout(a,50))}u.value=!1},T=pe();let i=I(()=>T.bsMaps),k=h([]);function M(v,a){const r=[],_=new Set;for(;_.size<v;){const x=Math.floor(Math.random()*a.length);_.has(x)||(_.add(x),r.push(a[x]))}return r}const y=()=>{let v={};o.value.forEach(r=>{v[r]=i.value[r].map});let a=n.value;if(a<o.value.length){let r=M(a,o.value);k.value=r.map(_=>({mode:_,value:M(1,v[_])[0]}))}else if(a===o.value.length)k.value=o.value.map(r=>({mode:r,value:M(1,v[r])[0]}));else if(a>o.value.length){let r=o.value.reduce((g,e)=>(g=g+i.value[e].map.length,g),0);if(a>r){W.fail("抽取错误，原因：配置地图的数量少于抽取数量");return}let _=[],x=o.value.map(g=>{let e=M(1,v[g])[0];return v[g].forEach(s=>{s!==e&&_.push({mode:g,value:s})}),{mode:g,value:e}}),E=a-o.value.length,N=M(E,_);k.value=[...x,...N]}},B=async()=>{if(u.value){W.info("当前正在抽取");return}if(o.value.length===0){W.info("模式不能为空");return}k.value=[],u.value=!0,await w(),y()},q=v=>({bs:"宝石：",jk:"金库：",rq:"热区：",sj:"赏金：",tt:"淘汰：",zq:"足球："})[v]||"";return(v,a)=>{const r=me,_=ge,x=ve,E=Oe,N=Ae;return P(),j(X,null,[a[13]||(a[13]=z("div",{class:"title"},"地图抽取工具",-1)),z("div",Ye,[a[12]||(a[12]=z("span",{class:"modetext"},"模式：",-1)),l(_,{ref_key:"checkboxGroup",ref:c,class:"modeGroup",modelValue:V(o),"onUpdate:modelValue":a[0]||(a[0]=g=>G(o)?o.value=g:null),direction:"horizontal"},{default:b(()=>[l(r,{class:"modeItem",name:"bs"},{default:b(()=>a[2]||(a[2]=[C("宝石")])),_:1}),l(r,{class:"modeItem",name:"jk"},{default:b(()=>a[3]||(a[3]=[C("金库")])),_:1}),l(r,{class:"modeItem",name:"sj"},{default:b(()=>a[4]||(a[4]=[C("赏金")])),_:1}),l(r,{class:"modeItem",name:"tt"},{default:b(()=>a[5]||(a[5]=[C("淘汰")])),_:1}),l(r,{class:"modeItem",name:"rq"},{default:b(()=>a[6]||(a[6]=[C("热区")])),_:1}),l(r,{class:"modeItem",name:"zq"},{default:b(()=>a[7]||(a[7]=[C("足球")])),_:1})]),_:1},8,["modelValue"]),z("div",Qe,[l(x,{type:"primary",onClick:d},{default:b(()=>a[8]||(a[8]=[C("全选")])),_:1}),l(x,{type:"primary",onClick:m},{default:b(()=>a[9]||(a[9]=[C("反选")])),_:1})]),z("div",Ze,[a[11]||(a[11]=C(" 数量：")),l(E,{modelValue:V(n),"onUpdate:modelValue":a[1]||(a[1]=g=>G(n)?n.value=g:n=g),min:"1",max:"7",integer:""},null,8,["modelValue"]),l(x,{round:"",type:"success",class:"randomButton",onClick:B},{default:b(()=>a[10]||(a[10]=[C("抽取")])),_:1})]),z("div",et,[l(N,{percentage:V(f),"stroke-width":"8"},null,8,["percentage"])])]),V(k).length!==0?(P(),j("div",tt,[(P(!0),j(X,null,de(V(k),(g,e)=>(P(),j("span",{class:"mapItem",key:e},ne(q(g.mode))+ne(g.value),1))),128))])):Ve("",!0)],64)}}}),nt=le(at,[["__scopeId","data-v-a75fedf8"]]),ot={class:"bsMapSetting_container"},st={class:"dropdown_container"},lt=1,ut=A({__name:"bsMapSetting",setup(t){let o=h([{text:"宝石",value:"bs"},{text:"金库",value:"jk"},{text:"赏金",value:"sj"},{text:"淘汰",value:"tt"},{text:"热区",value:"rq"},{text:"足球",value:"zq"}]),c=h("bs");const d={bs:{name:"bs",value:["硬石矿井","水晶街机厅","戈壁陷阱","宝石要塞","十面埋伏","嗖嗖作响","矿车飞驰","乡趣游乐场","开阔地带","终点站","清理森林","更酷的硬石矿井"]},jk:{name:"jk",value:["轰隆峡谷","安全区域","烫手山芋","遥远的桥","超大湖泊","重制废屋"]},sj:{name:"sj",value:["蝮蛇草场","神秘流星","草丛迷踪","大运河","夹心蛋糕","责任自负"]},tt:{name:"tt",value:["金臂峡谷","摇滚贝尔","烈焰凤凰","空旷荒野","新地平线","四重关卡","中心字母","两河并行","森林深处","袖珍岛屿","咆哮神庙","青翠废墟"]},rq:{name:"rq",value:["开门营业","平行游戏","灼热火圈","甲虫决斗","水上运动","吵闹领居"]},zq:{name:"zq",value:["后院球场","三重威胁","精准射门","绿荫球场","超级海滩","梦幻弹珠","中心舞台","沙滩足球","阳光球场","点球大战","二次进攻","十字球场"]}};let m=I(()=>d[c.value].value);const f=pe();let n=I(()=>f.bsMaps),u=h([]);u.value=n.value[c.value].map,D(()=>c.value,(T,i)=>{n.value[i].map=u.value,u.value=n.value[T].map}),D(()=>u.value,(T,i)=>{T.length<lt&&(W.info("地图最小选择数量为1"),u.value=i)});const w=()=>{n.value[c.value].map=u.value,W.success("保存成功")};return(T,i)=>{const k=Ne,M=ze,y=ve,B=me,q=Xe,v=ge;return P(),j("div",ot,[z("div",st,[l(M,null,{default:b(()=>[l(k,{modelValue:V(c),"onUpdate:modelValue":i[0]||(i[0]=a=>G(c)?c.value=a:c=a),options:V(o)},null,8,["modelValue","options"])]),_:1}),l(y,{class:"save_button",type:"success",onClick:w},{default:b(()=>i[2]||(i[2]=[C("保存")])),_:1})]),l(v,{class:"mapGroup",modelValue:V(u),"onUpdate:modelValue":i[1]||(i[1]=a=>G(u)?u.value=a:u=a)},{default:b(()=>[(P(!0),j(X,null,de(V(m),(a,r)=>(P(),oe(q,{class:"mapsItem",key:r},{right:b(()=>[l(y,{square:"",text:"删除",type:"danger",class:"delete-button"})]),default:b(()=>[l(B,{class:"mapItem",name:a},{default:b(()=>[C(ne(a),1)]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue"])])}}}),it=le(ut,[["__scopeId","data-v-89b68b57"]]),rt={class:"bs_container bs_container_size"},ct=A({__name:"index",setup(t){let o=h("home");return(c,d)=>{const m=Be,f=Pe,n=Ie;return P(),j(X,null,[l(m),z("div",rt,[V(o)==="home"?(P(),oe(nt,{key:0})):(P(),oe(it,{key:1}))]),l(n,{modelValue:V(o),"onUpdate:modelValue":d[0]||(d[0]=u=>G(o)?o.value=u:o=u)},{default:b(()=>[l(f,{icon:"home-o",name:"home"},{default:b(()=>d[1]||(d[1]=[C("主页")])),_:1}),l(f,{icon:"setting-o",name:"setting"},{default:b(()=>d[2]||(d[2]=[C("配置")])),_:1})]),_:1},8,["modelValue"])],64)}}}),yt=le(ct,[["__scopeId","data-v-a2a5b6c8"]]);export{yt as default};
